(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,90167,97084,e=>{"use strict";var t=e.i(49163);let r=(0,t.default)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);e.s(["Mail",()=>r],90167);let a=(0,t.default)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);e.s(["Info",()=>a],97084)},20927,e=>{"use strict";let t=(0,e.i(49163).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],20927)},51444,e=>{"use strict";let t=(0,e.i(49163).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>t],51444)},67190,e=>{"use strict";let t=(0,e.i(49163).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],67190)},50363,e=>{"use strict";let t=(0,e.i(49163).default)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>t],50363)},67951,e=>{"use strict";let t=(0,e.i(49163).default)("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);e.s(["Smartphone",()=>t],67951)},20277,e=>{"use strict";let t=(0,e.i(49163).default)("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);e.s(["MessageCircle",()=>t],20277)},47248,e=>{"use strict";let t=(0,e.i(49163).default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],47248)},32905,e=>{"use strict";let t=(0,e.i(49163).default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);e.s(["RefreshCw",()=>t],32905)},98275,e=>{"use strict";let t=(0,e.i(49163).default)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);e.s(["Send",()=>t],98275)},33121,e=>{"use strict";let t=(0,e.i(49163).default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);e.s(["Download",()=>t],33121)},45155,85744,e=>{"use strict";var t=e.i(49163);let r=(0,t.default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>r],45155);let a=(0,t.default)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);e.s(["EyeOff",()=>a],85744)},96241,e=>{"use strict";let t=(0,e.i(49163).default)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["Save",()=>t],96241)},81114,e=>{"use strict";let t=(0,e.i(49163).default)("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);e.s(["Package",()=>t],81114)},37239,e=>{"use strict";let t=(0,e.i(49163).default)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Settings",()=>t],37239)},59173,e=>{"use strict";var t=e.i(13161),r=e.i(37239),a=e.i(7020),s=e.i(81114),i=e.i(316),l=e.i(51444),d=e.i(96241),o=e.i(72079),n=e.i(31981),c=e.i(91447),u=e.i(32575),h=e.i(8950),x=e.i(97220);function m(){let{theme:e}=(0,o.useTheme)(),{user:m}=(0,x.useAuth)(),[g,b]=(0,c.useState)(!1),[p,y]=(0,c.useState)([]),[f,k]=(0,c.useState)([]);(0,c.useEffect)(()=>{let e=async()=>{try{let e=(await u.api.users.list()).data,t=[];m?.role==="gerencia"||m?.role==="admin"?t=e.filter(e=>!0===e.active&&("asesor"===e.role||"auditor"===e.role&&e.numeroEquipo)):m?.role==="supervisor"&&(t=e.filter(e=>!0===e.active&&(("asesor"===e.role||"auditor"===e.role)&&e.numeroEquipo===m.numeroEquipo||e._id===m._id))),t.sort((e,t)=>{let r=e.numeroEquipo?parseInt(e.numeroEquipo):999999,a=t.numeroEquipo?parseInt(t.numeroEquipo):999999;return r!==a?r-a:e.nombre.localeCompare(t.nombre)}),y(t)}catch(e){console.error("Error cargando usuarios:",e),h.toast.error("Error al cargar lista de asesores")}};m&&e()},[m]);let v=(e,t,r)=>{k(f.map(a=>a.id!==e?a:"freshPercentage"===t?{...a,mix:{freshPercentage:Number(r),reusablePercentage:100-Number(r)}}:{...a,[t]:r}))},[w,j]=(0,c.useState)(null),N=async()=>{if(0===f.length)return void h.toast.error("Agrega al menos un asesor para distribuir");if(f.find(e=>!e.asesorId||e.quantity<=0))return void h.toast.error("Completa todos los campos de asesor y cantidad");if(m?.role==="supervisor"&&w){let e=w.freshCount+w.reusableCount,t=0,r=0;for(let e of f){let a=e.mix.freshPercentage/100,s=e.mix.reusablePercentage/100;t+=Math.floor(e.quantity*a),r+=Math.ceil(e.quantity*s)}let a=f.reduce((e,t)=>e+t.quantity,0);if(a>e)return void h.toast.error(`No puedes enviar ${a} datos. Solo tienes ${e} disponibles.`);if(t>w.freshCount)return void h.toast.error(`No hay suficientes datos frescos. Solicitados: ${t}, Disponibles: ${w.freshCount}`);if(r>w.reusableCount)return void h.toast.error(`No hay suficientes datos reutilizables. Solicitados: ${r}, Disponibles: ${w.reusableCount}`)}b(!0);try{let e={distribution:f.map(({asesorId:e,quantity:t,mix:r})=>({asesorId:e,quantity:Number(t),mix:r}))};if(await u.api.assignments.distribute(e),h.toast.success("Distribución completada exitosamente"),k([]),m?.role==="supervisor"){let e=await u.api.affiliates.getSupervisorStats();j(e.data)}}catch(e){console.error("Error distribuyendo:",e),h.toast.error("Error al realizar la distribución")}finally{b(!1)}};return(0,c.useEffect)(()=>{m?.role==="supervisor"&&(async()=>{try{let e=await u.api.affiliates.getSupervisorStats();j(e.data)}catch(e){console.error("Error fetching supervisor stats:",e)}})()},[m]),(0,t.jsxs)("div",{className:"animate-fade-in-up space-y-4",children:[(0,t.jsxs)("div",{className:(0,n.cn)("rounded-2xl border p-4 lg:p-6 backdrop-blur-sm","dark"===e?"bg-gradient-to-br from-white/5 to-white/[0.02] border-white/10":"bg-gradient-to-br from-white to-[#FAF7F2]/80 border-purple-200/30 shadow-lg shadow-purple-100/30"),children:[(0,t.jsxs)("h2",{className:(0,n.cn)("text-lg lg:text-xl font-semibold flex items-center gap-2","dark"===e?"text-white":"text-gray-700"),children:[(0,t.jsx)(r.Settings,{className:(0,n.cn)("w-5 h-5","dark"===e?"text-purple-400":"text-purple-500")}),"Administración de Datos"]}),(0,t.jsx)("p",{className:(0,n.cn)("text-sm mt-2","dark"===e?"text-gray-400":"text-gray-600"),children:"Configura la distribución digital de afiliados a los asesores."})]}),m?.role==="supervisor"&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:(0,n.cn)("rounded-2xl border p-6 backdrop-blur-sm","dark"===e?"bg-gradient-to-br from-white/5 to-white/[0.02] border-white/10":"bg-gradient-to-br from-white to-[#FAF7F2]/80 border-purple-200/30 shadow-lg shadow-purple-100/30"),children:[(0,t.jsx)("h2",{className:(0,n.cn)("text-xl font-semibold flex items-center gap-2 mb-6","dark"===e?"text-white":"text-gray-800"),children:"Disponibilidad de Datos"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:(0,n.cn)("p-6 rounded-2xl border transition-all duration-300","dark"===e?"bg-emerald-500/10 border-emerald-500/20 hover:bg-emerald-500/20":"bg-emerald-50 border-emerald-200 hover:bg-emerald-100"),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("span",{className:(0,n.cn)("text-sm font-medium","dark"===e?"text-emerald-300":"text-emerald-700"),children:"Datos Frescos"}),(0,t.jsx)("div",{className:(0,n.cn)("p-2 rounded-lg","dark"===e?"bg-emerald-500/20":"bg-emerald-200"),children:(0,t.jsx)(a.Users,{className:(0,n.cn)("w-5 h-5","dark"===e?"text-emerald-400":"text-emerald-600")})})]}),(0,t.jsx)("div",{className:(0,n.cn)("text-3xl font-bold","dark"===e?"text-white":"text-gray-900"),children:w?.freshCount||0}),(0,t.jsx)("p",{className:(0,n.cn)("text-xs mt-2","dark"===e?"text-gray-400":"text-gray-500"),children:"Disponibles para asignar"})]}),(0,t.jsxs)("div",{className:(0,n.cn)("p-6 rounded-2xl border transition-all duration-300","dark"===e?"bg-blue-500/10 border-blue-500/20 hover:bg-blue-500/20":"bg-blue-50 border-blue-200 hover:bg-blue-100"),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("span",{className:(0,n.cn)("text-sm font-medium","dark"===e?"text-blue-300":"text-blue-700"),children:"Datos Reutilizables"}),(0,t.jsx)("div",{className:(0,n.cn)("p-2 rounded-lg","dark"===e?"bg-blue-500/20":"bg-blue-200"),children:(0,t.jsx)(s.Package,{className:(0,n.cn)("w-5 h-5","dark"===e?"text-blue-400":"text-blue-600")})})]}),(0,t.jsx)("div",{className:(0,n.cn)("text-3xl font-bold","dark"===e?"text-white":"text-gray-900"),children:w?.reusableCount||0}),(0,t.jsx)("p",{className:(0,n.cn)("text-xs mt-2","dark"===e?"text-gray-400":"text-gray-500"),children:"Disponibles para re-asignar"})]})]})]}),(0,t.jsxs)("div",{className:(0,n.cn)("rounded-2xl border p-6 backdrop-blur-sm","dark"===e?"bg-gradient-to-br from-white/5 to-white/[0.02] border-white/10":"bg-gradient-to-br from-white to-[#FAF7F2]/80 border-purple-200/30 shadow-lg shadow-purple-100/30"),children:[(0,t.jsx)("h3",{className:(0,n.cn)("text-lg font-semibold mb-4","dark"===e?"text-white":"text-gray-800"),children:"Detalle por Obra Social"}),w?.byObraSocial&&w.byObraSocial.length>0?(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:w.byObraSocial.map((r,a)=>(0,t.jsxs)("div",{className:(0,n.cn)("flex items-center justify-between p-3 rounded-xl border","dark"===e?"bg-white/5 border-white/10":"bg-white border-gray-100"),children:[(0,t.jsx)("span",{className:(0,n.cn)("text-sm font-medium truncate flex-1","dark"===e?"text-gray-300":"text-gray-700"),children:r.obraSocial||"Sin especificar"}),(0,t.jsx)("span",{className:(0,n.cn)("text-sm font-bold px-2 py-1 rounded-lg ml-2","dark"===e?"bg-purple-500/20 text-purple-300":"bg-purple-100 text-purple-700"),children:r.count})]},a))}):(0,t.jsx)("div",{className:(0,n.cn)("text-center py-8 text-sm","dark"===e?"text-gray-500":"text-gray-400"),children:"No hay datos disponibles"})]})]}),(0,t.jsxs)("div",{className:(0,n.cn)("rounded-2xl border p-4 lg:p-6 backdrop-blur-sm","dark"===e?"bg-gradient-to-br from-white/5 to-white/[0.02] border-white/10":"bg-gradient-to-br from-white to-[#FAF7F2]/80 border-purple-200/30 shadow-lg shadow-purple-100/30"),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("h3",{className:(0,n.cn)("font-semibold flex items-center gap-2","dark"===e?"text-orange-400":"text-orange-500"),children:[(0,t.jsx)(s.Package,{className:"w-4 h-4"}),"Configuración de Distribución"]}),(0,t.jsxs)("button",{onClick:()=>{k([...f,{id:Math.random().toString(36).substr(2,9),asesorId:"",quantity:50,mix:{freshPercentage:50,reusablePercentage:50}}])},className:(0,n.cn)("flex items-center gap-1 px-3 py-1.5 rounded-lg text-sm font-medium transition-colors","dark"===e?"bg-green-500/20 text-green-400 hover:bg-green-500/30":"bg-green-100 text-green-600 hover:bg-green-200"),children:[(0,t.jsx)(i.Plus,{className:"w-4 h-4"}),"Agregar Asesor"]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[0===f.length&&(0,t.jsx)("div",{className:(0,n.cn)("text-center py-8 text-sm","dark"===e?"text-gray-500":"text-gray-400"),children:'No hay configuraciones. Haz clic en "Agregar Asesor" para comenzar.'}),f.map((r,a)=>(0,t.jsxs)("div",{className:(0,n.cn)("rounded-xl border p-4 transition-all","dark"===e?"border-white/10 bg-white/5":"border-gray-200 bg-gray-50"),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsxs)("span",{className:(0,n.cn)("font-medium text-sm","dark"===e?"text-white":"text-gray-700"),children:["Asignación #",a+1]}),(0,t.jsx)("button",{onClick:()=>{var e;return e=r.id,void k(f.filter(t=>t.id!==e))},className:"text-red-400 hover:text-red-500 transition-colors",children:(0,t.jsx)(l.Trash2,{className:"w-4 h-4"})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-3 items-end",children:[(0,t.jsxs)("div",{className:"lg:col-span-4",children:[(0,t.jsx)("label",{className:(0,n.cn)("text-xs mb-1 block","dark"===e?"text-gray-400":"text-gray-500"),children:"Asesor"}),(0,t.jsxs)("select",{value:r.asesorId,onChange:e=>v(r.id,"asesorId",e.target.value),className:(0,n.cn)("w-full px-3 py-2 rounded-lg border text-sm","dark"===e?"bg-white/5 border-white/10 text-white":"bg-white border-gray-200 text-gray-700"),children:[(0,t.jsx)("option",{value:"",children:"-- Seleccione --"}),p.map(e=>(0,t.jsxs)("option",{value:e._id,children:[e.nombre," ",e.numeroEquipo?`(Eq: ${e.numeroEquipo})`:""]},e._id))]})]}),(0,t.jsxs)("div",{className:"lg:col-span-2",children:[(0,t.jsx)("label",{className:(0,n.cn)("text-xs mb-1 block","dark"===e?"text-gray-400":"text-gray-500"),children:"Cantidad"}),(0,t.jsx)("input",{type:"number",value:r.quantity,onChange:e=>v(r.id,"quantity",e.target.value),className:(0,n.cn)("w-full px-3 py-2 rounded-lg border text-sm","dark"===e?"bg-white/5 border-white/10 text-white":"bg-white border-gray-200 text-gray-700")})]}),(0,t.jsxs)("div",{className:"lg:col-span-6",children:[(0,t.jsxs)("label",{className:(0,n.cn)("text-xs mb-1 block flex justify-between","dark"===e?"text-gray-400":"text-gray-500"),children:[(0,t.jsxs)("span",{children:["Mezcla: ",r.mix.freshPercentage,"% Frescos"]}),(0,t.jsxs)("span",{children:[r.mix.reusablePercentage,"% Reutilizables"]})]}),(0,t.jsx)("input",{type:"range",min:"0",max:"100",step:"10",value:r.mix.freshPercentage,onChange:e=>v(r.id,"freshPercentage",e.target.value),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700"})]})]})]},r.id))]})]}),(0,t.jsx)("button",{onClick:N,disabled:g||0===f.length,className:(0,n.cn)("flex items-center gap-2 px-6 py-3 rounded-xl font-semibold transition-all duration-200 hover:scale-105 disabled:opacity-50 disabled:hover:scale-100","dark"===e?"bg-gradient-to-r from-blue-600 to-blue-500 text-white hover:from-blue-500 hover:to-blue-400":"bg-gradient-to-r from-blue-500 to-blue-400 text-white hover:from-blue-400 hover:to-blue-300"),children:g?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Procesando..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Save,{className:"w-4 h-4"}),"Ejecutar Distribución"]})})]})}e.s(["ContactarAdministracion",()=>m])},63134,e=>{"use strict";var t=e.i(13161),r=e.i(55387);function a(){return(0,t.jsx)(r.DashboardContent,{activeSection:"auditorias-afip-padron"})}e.s(["default",()=>a])}]);