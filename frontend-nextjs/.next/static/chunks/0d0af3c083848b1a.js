(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,22426,(e,t,r)=>{t.exports=e.r(16754)},97220,e=>{"use strict";let t,r,a,n;var o,s=e.i(91447);let i=e=>{let t,r=new Set,a=(e,a)=>{let n="function"==typeof e?e(t):e;if(!Object.is(n,t)){let e=t;t=(null!=a?a:"object"!=typeof n||null===n)?n:Object.assign({},t,n),r.forEach(r=>r(t,e))}},n=()=>t,o={setState:a,getState:n,getInitialState:()=>s,subscribe:e=>(r.add(e),()=>r.delete(e))},s=t=e(a,n,o);return o},l=e=>t=>{try{let r=e(t);if(r instanceof Promise)return r;return{then:e=>l(e)(r),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>l(t)(e)}}},u=(a=(o=(t=(e,t)=>({user:null,token:null,isAuthenticated:!1,login:async(t,r)=>{try{let a=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:r})});if(!a.ok){let e=await a.json();throw Error(e.message||"Login failed")}let n=await a.json();return localStorage.setItem("token",n.token),document.cookie=`token=${n.token}; path=/; max-age=86400; SameSite=Lax`,e({user:n.user,token:n.token,isAuthenticated:!0}),n}catch(e){throw console.error("Login error:",e),e}},register:async e=>{try{let t=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e=await t.json();throw Error(e.message||e.errors?.[0]||"Error en el registro")}}catch(e){throw console.error("Register error:",e),e}},recoverPassword:async e=>{try{let t=await fetch("/api/auth/forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})});if(!t.ok){let e=await t.json();throw Error(e.message||"Error al solicitar recuperaciÃ³n")}}catch(e){throw console.error("Recover password error:",e),e}},logout:()=>{localStorage.removeItem("token"),document.cookie="token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",e({user:null,token:null,isAuthenticated:!1})},setUser:(t,r)=>{localStorage.setItem("token",r),e({user:t,token:r,isAuthenticated:!0})},updateUser:r=>{let a=t().user;a&&e({user:{...a,...r}})}}),r={name:"auth-storage"},(e,a,n)=>{let o,s={storage:function(e,t){let r;try{r=e()}catch(e){return}return{getItem:e=>{var t;let a=e=>null===e?null:JSON.parse(e,void 0),n=null!=(t=r.getItem(e))?t:null;return n instanceof Promise?n.then(a):a(n)},setItem:(e,t)=>r.setItem(e,JSON.stringify(t,void 0)),removeItem:e=>r.removeItem(e)}}(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...r},i=!1,u=new Set,c=new Set,d=s.storage;if(!d)return t((...t)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),e(...t)},a,n);let h=()=>{let e=s.partialize({...a()});return d.setItem(s.name,{state:e,version:s.version})},g=n.setState;n.setState=(e,t)=>(g(e,t),h());let m=t((...t)=>(e(...t),h()),a,n);n.getInitialState=()=>m;let f=()=>{var t,r;if(!d)return;i=!1,u.forEach(e=>{var t;return e(null!=(t=a())?t:m)});let n=(null==(r=s.onRehydrateStorage)?void 0:r.call(s,null!=(t=a())?t:m))||void 0;return l(d.getItem.bind(d))(s.name).then(e=>{if(e)if("number"!=typeof e.version||e.version===s.version)return[!1,e.state];else{if(s.migrate){let t=s.migrate(e.state,e.version);return t instanceof Promise?t.then(e=>[!0,e]):[!0,t]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(t=>{var r;let[n,i]=t;if(e(o=s.merge(i,null!=(r=a())?r:m),!0),n)return h()}).then(()=>{null==n||n(o,void 0),o=a(),i=!0,c.forEach(e=>e(o))}).catch(e=>{null==n||n(void 0,e)})};return n.persist={setOptions:e=>{s={...s,...e},e.storage&&(d=e.storage)},clearStorage:()=>{null==d||d.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>f(),hasHydrated:()=>i,onHydrate:e=>(u.add(e),()=>{u.delete(e)}),onFinishHydration:e=>(c.add(e),()=>{c.delete(e)})},s.skipHydration||f(),o||m}))?i(o):i,Object.assign(n=e=>(function(e,t=e=>e){let r=s.default.useSyncExternalStore(e.subscribe,s.default.useCallback(()=>t(e.getState()),[e,t]),s.default.useCallback(()=>t(e.getInitialState()),[e,t]));return s.default.useDebugValue(r),r})(a,e),a),n);e.s(["useAuth",0,u],97220)},13206,e=>{"use strict";var t=e.i(13161),r=e.i(91447),a=e.i(22426),n=e.i(97220);function o(){let e=(0,a.useRouter)(),{isAuthenticated:o}=(0,n.useAuth)(),[s,i]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{i(!0)},[]),(0,r.useEffect)(()=>{s&&(o?e.push("/dashboard"):e.push("/login"))},[o,e,s]),(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-purple-50 to-blue-50",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Cargando..."})]})})}e.s(["default",()=>o])}]);