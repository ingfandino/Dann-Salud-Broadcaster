(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,32905,e=>{"use strict";let t=(0,e.i(49163).default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);e.s(["RefreshCw",()=>t],32905)},67951,e=>{"use strict";let t=(0,e.i(49163).default)("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);e.s(["Smartphone",()=>t],67951)},50363,e=>{"use strict";let t=(0,e.i(49163).default)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>t],50363)},67190,e=>{"use strict";let t=(0,e.i(49163).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],67190)},6111,e=>{"use strict";var t=e.i(13161),a=e.i(91447),r=e.i(49163);let s=(0,r.default)("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);var l=e.i(32905),i=e.i(67951);let c=(0,r.default)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var n=e.i(50363),d=e.i(67190),o=e.i(72079),h=e.i(31981),x=e.i(32575),m=e.i(8950),u=e.i(22426);function p(){let{theme:e}=(0,o.useTheme)(),r=(0,u.useRouter)(),[p,f]=(0,a.useState)(!1),[w,g]=(0,a.useState)(null),[y,b]=(0,a.useState)(!1),[j,v]=(0,a.useState)(!0),[k,N]=(0,a.useState)(null),C=(0,a.useRef)(!1),R=(0,a.useCallback)(async()=>{try{N(null);let e=await x.api.whatsapp.status();if(e.data?.connected){if(!C.current){C.current=!0,b(!0),g(null),v(!1),m.toast.success("ðŸŽ‰ Â¡WhatsApp vinculado exitosamente!"),setTimeout(()=>{r.push("/dashboard/contact/today")},2e3);return}b(!0),g(null),v(!1);return}C.current=!1,b(!1);let t=await x.api.whatsapp.qr();t.data?.qr?g(t.data.qr):t.data?.initializing&&N("Inicializando conexiÃ³n..."),v(!1)}catch(e){console.error("Error obteniendo QR:",e),N("Error al obtener QR"),v(!1)}},[r]);(0,a.useEffect)(()=>{R();let e=setInterval(R,5e3);return()=>clearInterval(e)},[R]);let A=async()=>{f(!0);try{await x.api.whatsapp.relink(),m.toast.success("Generando nuevo QR..."),await R()}catch(e){m.toast.error("Error al refrescar QR")}finally{f(!1)}};return(0,t.jsx)("div",{className:"animate-fade-in-up flex items-center justify-center min-h-[60vh]",children:(0,t.jsxs)("div",{className:(0,h.cn)("w-full max-w-md rounded-2xl border p-6 lg:p-8 backdrop-blur-sm text-center","dark"===e?"bg-gradient-to-br from-white/10 to-white/5 border-white/10 shadow-2xl shadow-purple-500/10":"bg-gradient-to-br from-white to-[#FAF7F2]/80 border-purple-200/30 shadow-xl shadow-purple-200/30"),children:[(0,t.jsxs)("div",{className:"flex items-center justify-center gap-3 mb-2",children:[(0,t.jsx)("div",{className:(0,h.cn)("p-2.5 rounded-xl","dark"===e?"bg-gradient-to-br from-purple-500/20 to-blue-500/20":"bg-gradient-to-br from-purple-100 to-blue-100"),children:(0,t.jsx)(s,{className:(0,h.cn)("w-6 h-6","dark"===e?"text-purple-400":"text-purple-600")})}),(0,t.jsx)("h2",{className:(0,h.cn)("text-xl lg:text-2xl font-bold","dark"===e?"text-white":"text-gray-800"),children:"Vincular WhatsApp"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-6",children:[(0,t.jsx)(i.Smartphone,{className:(0,h.cn)("w-4 h-4","dark"===e?"text-gray-400":"text-gray-500")}),(0,t.jsx)("p",{className:(0,h.cn)("text-sm","dark"===e?"text-gray-400":"text-gray-600"),children:y?"WhatsApp vinculado correctamente":"Escanea este QR con WhatsApp"})]}),(0,t.jsxs)("div",{className:(0,h.cn)("relative mx-auto w-56 h-56 lg:w-64 lg:h-64 rounded-xl p-4 mb-6 overflow-hidden flex items-center justify-center","dark"===e?"bg-white":"bg-white border border-purple-100 shadow-inner"),children:[j&&(0,t.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,t.jsx)(d.Loader2,{className:"w-12 h-12 text-emerald-500 animate-spin"}),(0,t.jsx)("span",{className:"text-sm text-gray-500",children:"Cargando..."})]}),!j&&y&&(0,t.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,t.jsx)("div",{className:"w-20 h-20 rounded-full bg-emerald-100 flex items-center justify-center",children:(0,t.jsx)(n.CheckCircle2,{className:"w-12 h-12 text-emerald-500"})}),(0,t.jsx)("span",{className:"text-sm font-medium text-emerald-600",children:"Â¡Conectado!"})]}),!j&&!y&&w&&(0,t.jsx)("img",{src:w,alt:"QR Code WhatsApp",className:"w-full h-full object-contain"}),!j&&!y&&!w&&(0,t.jsxs)("div",{className:"flex flex-col items-center gap-3 text-center px-4",children:[(0,t.jsx)(d.Loader2,{className:"w-10 h-10 text-gray-400 animate-spin"}),(0,t.jsx)("span",{className:"text-xs text-gray-500",children:k||"Esperando cÃ³digo QR..."})]}),p&&(0,t.jsx)("div",{className:"absolute inset-0 bg-white/90 flex items-center justify-center",children:(0,t.jsx)(l.RefreshCw,{className:"w-8 h-8 text-emerald-500 animate-spin"})})]}),(0,t.jsxs)("button",{onClick:A,disabled:p,className:(0,h.cn)("w-full flex items-center justify-center gap-2 px-4 py-3 rounded-xl text-sm font-semibold transition-all transform hover:scale-[1.02] active:scale-[0.98]","dark"===e?"bg-gradient-to-r from-[#17C787] to-emerald-600 hover:from-[#17C787]/90 hover:to-emerald-600/90 text-white shadow-lg shadow-[#17C787]/20":"bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-600 hover:to-emerald-700 text-white shadow-lg shadow-emerald-200/50",p&&"opacity-70 cursor-not-allowed"),children:[(0,t.jsx)(l.RefreshCw,{className:(0,h.cn)("w-4 h-4",p&&"animate-spin")}),p?"Actualizando...":"Refrescar QR"]}),(0,t.jsx)("div",{className:(0,h.cn)("mt-6 pt-4 border-t","dark"===e?"border-white/10":"border-purple-100"),children:(0,t.jsxs)("div",{className:(0,h.cn)("flex items-center justify-center gap-2 text-xs flex-wrap","dark"===e?"text-gray-400":"text-gray-500"),children:[(0,t.jsx)("span",{children:"Abre WhatsApp"}),(0,t.jsx)(c,{className:"w-3 h-3"}),(0,t.jsx)("span",{children:"MenÃº de dispositivos vinculados"}),(0,t.jsx)(c,{className:"w-3 h-3"}),(0,t.jsx)("span",{children:"Escanea el cÃ³digo QR"})]})})]})})}function f(){return(0,t.jsx)(p,{})}e.s(["default",()=>f],6111)}]);