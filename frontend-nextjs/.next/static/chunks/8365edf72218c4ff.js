(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,20277,e=>{"use strict";let t=(0,e.i(49163).default)("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);e.s(["MessageCircle",()=>t],20277)},47248,e=>{"use strict";let t=(0,e.i(49163).default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],47248)},32905,e=>{"use strict";let t=(0,e.i(49163).default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);e.s(["RefreshCw",()=>t],32905)},33121,e=>{"use strict";let t=(0,e.i(49163).default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);e.s(["Download",()=>t],33121)},98275,e=>{"use strict";let t=(0,e.i(49163).default)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);e.s(["Send",()=>t],98275)},60444,e=>{"use strict";let t=(0,e.i(49163).default)("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);e.s(["Table",()=>t],60444)},2372,e=>{"use strict";let t=(0,e.i(49163).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>t],2372)},26374,e=>{"use strict";let t=(0,e.i(49163).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>t],26374)},20095,e=>{"use strict";var t=e.i(13161),a=e.i(60444),r=e.i(53609),s=e.i(33121),l=e.i(32905),n=e.i(77982),i=e.i(20277),o=e.i(2372),d=e.i(47248),c=e.i(98275),x=e.i(20483),g=e.i(26374),h=e.i(72079),u=e.i(31981),m=e.i(91447),p=e.i(32575),b=e.i(8950);function y(){let{theme:e}=(0,h.useTheme)(),[y,f]=(0,m.useState)(!1),[w,j]=(0,m.useState)([]),[k,v]=(0,m.useState)(""),[N,C]=(0,m.useState)(!1),[S,E]=(0,m.useState)(null),[M,A]=(0,m.useState)(""),[D,F]=(0,m.useState)(!1),[L,R]=(0,m.useState)(!1),[T,_]=(0,m.useState)(""),[z,I]=(0,m.useState)(""),[O,G]=(0,m.useState)(!1),P=async()=>{f(!0);try{let e=await p.api.assignments.getMyLeads();j(e.data)}catch(e){console.error("Error cargando leads:",e),b.toast.error("Error al cargar tus datos del día")}finally{f(!1)}};(0,m.useEffect)(()=>{P()},[]);let U=async(e,t)=>{try{j(w.map(a=>a._id===e?{...a,status:t}:a)),await p.api.assignments.updateStatus(e,{status:t}),b.toast.success(`Estado actualizado a ${t}`)}catch(e){console.error("Error actualizando estado:",e),b.toast.error("Error al actualizar estado"),P()}},B=async()=>{if(S&&M.trim()){F(!0);try{await p.api.assignments.sendWhatsApp(S._id,{message:M}),b.toast.success("Mensaje enviado correctamente"),C(!1),j(w.map(e=>e._id===S._id?{...e,status:"En Gestión"}:e))}catch(e){console.error("Error enviando WA:",e),b.toast.error(e.response?.data?.error||"Error al enviar mensaje")}finally{F(!1)}}},H=async()=>{if(S&&T){G(!0);try{await p.api.assignments.reschedule(S._id,{date:new Date(T).toISOString(),note:z}),b.toast.success("Reprogramado exitosamente"),R(!1),j(w.map(e=>e._id===S._id?{...e,status:"En Gestión",subStatus:"Reprogramado"}:e))}catch(e){console.error("Error reprogramando:",e),b.toast.error(e.response?.data?.error||"Error al reprogramar")}finally{G(!1)}}},W=w.filter(e=>{let t=k.toLowerCase();return e.affiliate?.nombre?.toLowerCase().includes(t)||e.affiliate?.telefono1?.includes(t)||e.affiliate?.cuil?.includes(t)}),q=async()=>{try{let e=await p.api.assignments.exportMyLeads(),t=window.URL.createObjectURL(new Blob([e.data])),a=document.createElement("a");a.href=t,a.setAttribute("download",`mis_leads_${new Date().toISOString().split("T")[0]}.xlsx`),document.body.appendChild(a),a.click(),a.remove(),b.toast.success("Excel exportado correctamente")}catch(e){console.error("Error exportando:",e),b.toast.error("Error al exportar Excel")}};return(0,t.jsxs)("div",{className:"animate-fade-in-up space-y-4 relative",children:[(0,t.jsxs)("div",{className:(0,u.cn)("rounded-2xl border p-4 lg:p-6 backdrop-blur-sm","dark"===e?"bg-gradient-to-br from-white/5 to-white/[0.02] border-white/10":"bg-gradient-to-br from-white to-[#FAF7F2]/80 border-purple-200/30 shadow-lg shadow-purple-100/30"),children:[(0,t.jsxs)("h2",{className:(0,u.cn)("text-lg lg:text-xl font-semibold flex items-center gap-2","dark"===e?"text-white":"text-gray-700"),children:[(0,t.jsx)(a.Table,{className:(0,u.cn)("w-5 h-5","dark"===e?"text-purple-400":"text-purple-500")}),"Datos del Día"]}),(0,t.jsxs)("p",{className:(0,u.cn)("text-sm mt-2","dark"===e?"text-gray-400":"text-gray-600"),children:["Gestiona tus asignaciones diarias. Total: ",w.length]})]}),(0,t.jsxs)("div",{className:(0,u.cn)("rounded-2xl border p-4 backdrop-blur-sm flex flex-col sm:flex-row gap-3 items-center justify-between","dark"===e?"bg-gradient-to-br from-white/5 to-white/[0.02] border-white/10":"bg-gradient-to-br from-white to-[#FAF7F2]/80 border-purple-200/30 shadow-lg shadow-purple-100/30"),children:[(0,t.jsxs)("div",{className:"relative flex-1 w-full sm:w-auto",children:[(0,t.jsx)(r.Search,{className:(0,u.cn)("absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4","dark"===e?"text-gray-400":"text-gray-500")}),(0,t.jsx)("input",{type:"text",placeholder:"Buscar por nombre, teléfono o CUIL...",value:k,onChange:e=>v(e.target.value),className:(0,u.cn)("pl-10 pr-4 py-2 w-full rounded-lg border text-sm","dark"===e?"bg-white/5 border-white/10 text-white placeholder-gray-500":"bg-white border-gray-200 text-gray-700 placeholder-gray-400")})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)("button",{onClick:q,className:(0,u.cn)("flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors","dark"===e?"bg-green-500/20 text-green-400 hover:bg-green-500/30":"bg-green-100 text-green-600 hover:bg-green-200"),children:[(0,t.jsx)(s.Download,{className:"w-4 h-4"}),"Exportar Excel"]}),(0,t.jsxs)("button",{onClick:P,className:(0,u.cn)("flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors","dark"===e?"bg-blue-500/20 text-blue-400 hover:bg-blue-500/30":"bg-blue-100 text-blue-600 hover:bg-blue-200"),children:[(0,t.jsx)(l.RefreshCw,{className:(0,u.cn)("w-4 h-4",y&&"animate-spin")}),"Actualizar"]})]})]}),(0,t.jsx)("div",{className:(0,u.cn)("rounded-2xl border backdrop-blur-sm overflow-hidden","dark"===e?"bg-gradient-to-br from-white/5 to-white/[0.02] border-white/10":"bg-gradient-to-br from-white to-[#FAF7F2]/80 border-purple-200/30 shadow-lg shadow-purple-100/30"),children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:(0,u.cn)("border-b","dark"===e?"bg-white/5 border-white/10":"bg-purple-50/50 border-purple-100"),children:[(0,t.jsx)("th",{className:(0,u.cn)("px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider","dark"===e?"text-gray-300":"text-gray-700"),children:"Afiliado"}),(0,t.jsx)("th",{className:(0,u.cn)("px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider","dark"===e?"text-gray-300":"text-gray-700"),children:"Datos Contacto"}),(0,t.jsx)("th",{className:(0,u.cn)("px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider","dark"===e?"text-gray-300":"text-gray-700"),children:"Estado"}),(0,t.jsx)("th",{className:(0,u.cn)("px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider","dark"===e?"text-gray-300":"text-gray-700"),children:"Acciones"})]})}),(0,t.jsxs)("tbody",{className:(0,u.cn)("divide-y","dark"===e?"divide-white/10":"divide-gray-200"),children:[W.map(a=>(0,t.jsxs)("tr",{className:(0,u.cn)("transition-colors","dark"===e?"hover:bg-white/5":"hover:bg-purple-50/30"),children:[(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:(0,u.cn)("font-medium text-sm","dark"===e?"text-white":"text-gray-900"),children:a.affiliate?.nombre||"Sin Nombre"}),(0,t.jsxs)("span",{className:(0,u.cn)("text-xs","dark"===e?"text-gray-400":"text-gray-500"),children:["CUIL: ",a.affiliate?.cuil||"-"]}),(0,t.jsx)("span",{className:(0,u.cn)("text-xs","dark"===e?"text-gray-400":"text-gray-500"),children:a.affiliate?.localidad})]})}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(n.Phone,{className:"w-3 h-3 text-gray-400"}),(0,t.jsx)("span",{className:(0,u.cn)("text-sm","dark"===e?"text-gray-300":"text-gray-600"),children:a.affiliate?.telefono1})]}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)("span",{className:(0,u.cn)("text-xs px-2 py-0.5 rounded-full border","dark"===e?"border-gray-700 text-gray-400":"border-gray-200 text-gray-500"),children:a.affiliate?.obraSocial||"Sin OS"})})]})}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsxs)("select",{value:a.status,onChange:e=>U(a._id,e.target.value),className:(0,u.cn)("px-2 py-1 rounded-md text-xs font-medium border-none outline-none cursor-pointer",(t=>{switch(t){case"Pendiente":return"dark"===e?"bg-yellow-500/20 text-yellow-400":"bg-yellow-100 text-yellow-700";case"En Gestión":return"dark"===e?"bg-blue-500/20 text-blue-400":"bg-blue-100 text-blue-700";case"Contactado":return"dark"===e?"bg-purple-500/20 text-purple-400":"bg-purple-100 text-purple-700";case"Venta":return"dark"===e?"bg-green-500/20 text-green-400":"bg-green-100 text-green-700";case"No Interesa":return"dark"===e?"bg-red-500/20 text-red-400":"bg-red-100 text-red-700";default:return"dark"===e?"bg-gray-500/20 text-gray-400":"bg-gray-100 text-gray-700"}})(a.status)),children:[(0,t.jsx)("option",{value:"Pendiente",children:"Pendiente"}),(0,t.jsx)("option",{value:"En Gestión",children:"En Gestión"}),(0,t.jsx)("option",{value:"Contactado",children:"Contactado"}),(0,t.jsx)("option",{value:"Venta",children:"Venta"}),(0,t.jsx)("option",{value:"No Interesa",children:"No Interesa"}),(0,t.jsx)("option",{value:"No Contesta",children:"No Contesta"})]}),a.subStatus&&(0,t.jsx)("span",{className:(0,u.cn)("text-[10px] italic","dark"===e?"text-gray-400":"text-gray-500"),children:a.subStatus})]})}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>{E(a),A(`Hola ${a.affiliate.nombre}, soy de Dann Salud. Te contacto por tu consulta sobre obra social.`),C(!0)},className:(0,u.cn)("p-2 rounded-lg transition-colors","dark"===e?"bg-green-500/20 text-green-400 hover:bg-green-500/30":"bg-green-100 text-green-600 hover:bg-green-200"),title:"Enviar WhatsApp",children:(0,t.jsx)(i.MessageCircle,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:()=>{let e;return E(a),void((e=new Date).setDate(e.getDate()+1),e.setHours(10,0,0,0),_(e.toISOString().slice(0,16)),I(""),R(!0))},className:(0,u.cn)("p-2 rounded-lg transition-colors","dark"===e?"bg-blue-500/20 text-blue-400 hover:bg-blue-500/30":"bg-blue-100 text-blue-600 hover:bg-blue-200"),title:"Reprogramar",children:(0,t.jsx)(o.Clock,{className:"w-4 h-4"})})]})})]},a._id)),0===W.length&&!y&&(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:4,className:"px-6 py-8 text-center text-gray-500",children:"No tienes datos asignados para hoy."})})]})]})})}),N&&S&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:(0,t.jsxs)("div",{className:(0,u.cn)("w-full max-w-md rounded-2xl border p-6 shadow-xl animate-scale-in","dark"===e?"bg-[#1a1b26] border-white/10":"bg-white border-gray-200"),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("h3",{className:(0,u.cn)("text-lg font-semibold flex items-center gap-2","dark"===e?"text-white":"text-gray-800"),children:[(0,t.jsx)(i.MessageCircle,{className:"w-5 h-5 text-green-500"}),"Enviar WhatsApp"]}),(0,t.jsx)("button",{onClick:()=>C(!1),className:"text-gray-500 hover:text-gray-700",children:(0,t.jsx)(x.X,{className:"w-5 h-5"})})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("p",{className:(0,u.cn)("text-sm mb-2","dark"===e?"text-gray-400":"text-gray-600"),children:["Para: ",(0,t.jsx)("span",{className:"font-medium text-green-500",children:S.affiliate.nombre})," (",S.affiliate.telefono1,")"]}),(0,t.jsx)("textarea",{value:M,onChange:e=>A(e.target.value),rows:4,className:(0,u.cn)("w-full p-3 rounded-xl border text-sm resize-none focus:ring-2 focus:ring-green-500/50 outline-none","dark"===e?"bg-white/5 border-white/10 text-white":"bg-gray-50 border-gray-200 text-gray-800"),placeholder:"Escribe tu mensaje aquí..."})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,t.jsx)("button",{onClick:()=>C(!1),className:(0,u.cn)("px-4 py-2 rounded-lg text-sm font-medium transition-colors","dark"===e?"hover:bg-white/10 text-gray-300":"hover:bg-gray-100 text-gray-600"),children:"Cancelar"}),(0,t.jsx)("button",{onClick:B,disabled:D||!M.trim(),className:(0,u.cn)("flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors","bg-green-500 text-white hover:bg-green-600 disabled:opacity-50 disabled:cursor-not-allowed"),children:D?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Enviando..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.Send,{className:"w-4 h-4"}),"Enviar Mensaje"]})})]})]})}),L&&S&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:(0,t.jsxs)("div",{className:(0,u.cn)("w-full max-w-md rounded-2xl border p-6 shadow-xl animate-scale-in","dark"===e?"bg-[#1a1b26] border-white/10":"bg-white border-gray-200"),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("h3",{className:(0,u.cn)("text-lg font-semibold flex items-center gap-2","dark"===e?"text-white":"text-gray-800"),children:[(0,t.jsx)(g.Calendar,{className:"w-5 h-5 text-blue-500"}),"Reprogramar Llamada"]}),(0,t.jsx)("button",{onClick:()=>R(!1),className:"text-gray-500 hover:text-gray-700",children:(0,t.jsx)(x.X,{className:"w-5 h-5"})})]}),(0,t.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:(0,u.cn)("text-xs mb-1 block","dark"===e?"text-gray-400":"text-gray-500"),children:"Fecha y Hora"}),(0,t.jsx)("input",{type:"datetime-local",value:T,onChange:e=>_(e.target.value),className:(0,u.cn)("w-full p-3 rounded-xl border text-sm focus:ring-2 focus:ring-blue-500/50 outline-none","dark"===e?"bg-white/5 border-white/10 text-white":"bg-gray-50 border-gray-200 text-gray-800")})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:(0,u.cn)("text-xs mb-1 block","dark"===e?"text-gray-400":"text-gray-500"),children:"Nota (Opcional)"}),(0,t.jsx)("textarea",{value:z,onChange:e=>I(e.target.value),rows:3,className:(0,u.cn)("w-full p-3 rounded-xl border text-sm resize-none focus:ring-2 focus:ring-blue-500/50 outline-none","dark"===e?"bg-white/5 border-white/10 text-white":"bg-gray-50 border-gray-200 text-gray-800"),placeholder:"Motivo de reprogramación..."})]})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,t.jsx)("button",{onClick:()=>R(!1),className:(0,u.cn)("px-4 py-2 rounded-lg text-sm font-medium transition-colors","dark"===e?"hover:bg-white/10 text-gray-300":"hover:bg-gray-100 text-gray-600"),children:"Cancelar"}),(0,t.jsx)("button",{onClick:H,disabled:O||!T,className:(0,u.cn)("flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors","bg-blue-500 text-white hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed"),children:O?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Guardando..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.CheckCircle,{className:"w-4 h-4"}),"Confirmar"]})})]})]})})]})}e.s(["ContactarDatosDia",()=>y])}]);