(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,35389,33133,29396,74402,e=>{"use strict";let t,r,n,a,s;var i=e.i(13161),l=e.i(91447);function o(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function d(...e){return t=>{let r=!1,n=e.map(e=>{let n=o(e,t);return r||"function"!=typeof n||(r=!0),n});if(r)return()=>{for(let t=0;t<n.length;t++){let r=n[t];"function"==typeof r?r():o(e[t],null)}}}}function c(...e){return l.useCallback(d(...e),e)}var u=Symbol.for("react.lazy"),m=l[" use ".trim().toString()];function x(e){var t;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===u&&"_payload"in e&&"object"==typeof(t=e._payload)&&null!==t&&"then"in t}var p=((s=l.forwardRef((e,t)=>{let{children:r,...n}=e;if(x(r)&&"function"==typeof m&&(r=m(r._payload)),l.isValidElement(r)){var a;let e,s,i=(a=r,(s=(e=Object.getOwnPropertyDescriptor(a.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?a.ref:(s=(e=Object.getOwnPropertyDescriptor(a,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?a.props.ref:a.props.ref||a.ref),o=function(e,t){let r={...t};for(let n in t){let a=e[n],s=t[n];/^on[A-Z]/.test(n)?a&&s?r[n]=(...e)=>{let t=s(...e);return a(...e),t}:a&&(r[n]=a):"style"===n?r[n]={...a,...s}:"className"===n&&(r[n]=[a,s].filter(Boolean).join(" "))}return{...e,...r}}(n,r.props);return r.type!==l.Fragment&&(o.ref=t?d(t,i):i),l.cloneElement(r,o)}return l.Children.count(r)>1?l.Children.only(null):null})).displayName="Slot.SlotClone",t=s,(r=l.forwardRef((e,r)=>{let{children:n,...a}=e;x(n)&&"function"==typeof m&&(n=m(n._payload));let s=l.Children.toArray(n),o=s.find(f);if(o){let e=o.props.children,n=s.map(t=>t!==o?t:l.Children.count(e)>1?l.Children.only(null):l.isValidElement(e)?e.props.children:null);return(0,i.jsx)(t,{...a,ref:r,children:l.isValidElement(e)?l.cloneElement(e,void 0,n):null})}return(0,i.jsx)(t,{...a,ref:r,children:n})})).displayName="Slot.Slot",r),h=Symbol("radix.slottable");function f(e){return l.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===h}var g=e.i(57431);let b=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,v=g.clsx;var y=e.i(31981);let j=(n="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a={variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}},e=>{var t;if((null==a?void 0:a.variants)==null)return v(n,null==e?void 0:e.class,null==e?void 0:e.className);let{variants:r,defaultVariants:s}=a,i=Object.keys(r).map(t=>{let n=null==e?void 0:e[t],a=null==s?void 0:s[t];if(null===n)return null;let i=b(n)||b(a);return r[t][i]}),l=e&&Object.entries(e).reduce((e,t)=>{let[r,n]=t;return void 0===n||(e[r]=n),e},{});return v(n,i,null==a||null==(t=a.compoundVariants)?void 0:t.reduce((e,t)=>{let{class:r,className:n,...a}=t;return Object.entries(a).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...s,...l}[t]):({...s,...l})[t]===r})?[...e,r,n]:e},[]),null==e?void 0:e.class,null==e?void 0:e.className)});function w({className:e,variant:t,size:r,asChild:n=!1,...a}){return(0,i.jsx)(n?p:"button",{"data-slot":"button",className:(0,y.cn)(j({variant:t,size:r,className:e})),...a})}var N=e.i(49163);let k=(0,N.default)("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);var C=e.i(98275);let E=(0,N.default)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),S=(0,N.default)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var _=e.i(72079);function R({currentView:e,onViewChange:t,onCompose:r,unreadCount:n}){let{theme:a}=(0,_.useTheme)();return(0,i.jsxs)("div",{className:(0,y.cn)("w-64 flex-shrink-0 border-r p-4 flex flex-col gap-4 hidden md:flex","dark"===a?"border-white/10 bg-black/20":"border-gray-200 bg-gray-50/50"),children:[(0,i.jsxs)(w,{onClick:r,className:(0,y.cn)("w-full gap-2 text-white","dark"===a?"bg-purple-600 hover:bg-purple-700":"bg-[#00C794] hover:bg-[#00a87d]"),children:[(0,i.jsx)(S,{className:"w-4 h-4"}),"Redactar"]}),(0,i.jsxs)("nav",{className:"space-y-1",children:[(0,i.jsxs)("button",{onClick:()=>t("inbox"),className:(0,y.cn)("w-full flex items-center justify-between px-3 py-2 rounded-lg text-sm font-medium transition-colors","inbox"===e?"dark"===a?"bg-white/10 text-white":"bg-[#00C794]/10 text-[#00C794]":"dark"===a?"text-gray-400 hover:bg-white/5 hover:text-white":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"),children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)(k,{className:"w-4 h-4"}),"Bandeja de entrada"]}),n>0&&(0,i.jsx)("span",{className:(0,y.cn)("text-white text-xs px-2 py-0.5 rounded-full","dark"===a?"bg-purple-600":"bg-[#00C794]"),children:n})]}),(0,i.jsxs)("button",{onClick:()=>t("sent"),className:(0,y.cn)("w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors","sent"===e?"dark"===a?"bg-white/10 text-white":"bg-[#00C794]/10 text-[#00C794]":"dark"===a?"text-gray-400 hover:bg-white/5 hover:text-white":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"),children:[(0,i.jsx)(C.Send,{className:"w-4 h-4"}),"Enviados"]}),(0,i.jsxs)("button",{onClick:()=>t("starred"),className:(0,y.cn)("w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors","starred"===e?"dark"===a?"bg-white/10 text-white":"bg-[#00C794]/10 text-[#00C794]":"dark"===a?"text-gray-400 hover:bg-white/5 hover:text-white":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"),children:[(0,i.jsx)(E,{className:"w-4 h-4"}),"Destacados"]})]})]})}e.s(["MessagesSidebar",()=>R],35389);let A=(0,N.default)("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);var M=e.i(51444);function O(e,t,{checkForDefaultPrevented:r=!0}={}){return function(n){if(e?.(n),!1===r||!n.defaultPrevented)return t?.(n)}}"undefined"!=typeof window&&window.document&&window.document.createElement;var T=globalThis?.document?l.useLayoutEffect:()=>{};l[" useEffectEvent ".trim().toString()],l[" useInsertionEffect ".trim().toString()];var z=l[" useInsertionEffect ".trim().toString()]||T;Symbol("RADIX:SYNC_STATE");var P=e=>{var t;let r,n,{present:a,children:s}=e,i=function(e){var t,r;let[n,a]=l.useState(),s=l.useRef(null),i=l.useRef(e),o=l.useRef("none"),[d,c]=(t=e?"mounted":"unmounted",r={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},l.useReducer((e,t)=>r[e][t]??e,t));return l.useEffect(()=>{let e=D(s.current);o.current="mounted"===d?e:"none"},[d]),T(()=>{let t=s.current,r=i.current;if(r!==e){let n=o.current,a=D(t);e?c("MOUNT"):"none"===a||t?.display==="none"?c("UNMOUNT"):r&&n!==a?c("ANIMATION_OUT"):c("UNMOUNT"),i.current=e}},[e,c]),T(()=>{if(n){let e,t=n.ownerDocument.defaultView??window,r=r=>{let a=D(s.current).includes(CSS.escape(r.animationName));if(r.target===n&&a&&(c("ANIMATION_END"),!i.current)){let r=n.style.animationFillMode;n.style.animationFillMode="forwards",e=t.setTimeout(()=>{"forwards"===n.style.animationFillMode&&(n.style.animationFillMode=r)})}},a=e=>{e.target===n&&(o.current=D(s.current))};return n.addEventListener("animationstart",a),n.addEventListener("animationcancel",r),n.addEventListener("animationend",r),()=>{t.clearTimeout(e),n.removeEventListener("animationstart",a),n.removeEventListener("animationcancel",r),n.removeEventListener("animationend",r)}}c("ANIMATION_END")},[n,c]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:l.useCallback(e=>{s.current=e?getComputedStyle(e):null,a(e)},[])}}(a),o="function"==typeof s?s({present:i.isPresent}):l.Children.only(s),d=c(i.ref,(t=o,(n=(r=Object.getOwnPropertyDescriptor(t.props,"ref")?.get)&&"isReactWarning"in r&&r.isReactWarning)?t.ref:(n=(r=Object.getOwnPropertyDescriptor(t,"ref")?.get)&&"isReactWarning"in r&&r.isReactWarning)?t.props.ref:t.props.ref||t.ref));return"function"==typeof s||i.isPresent?l.cloneElement(o,{ref:d}):null};function D(e){return e?.animationName||"none"}P.displayName="Presence";var I=e.i(56667),L=Symbol("radix.slottable");function $(e){return l.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===L}var U=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{var r,n;let a,s,o,c=(n=r=`Primitive.${t}`,(a=l.forwardRef((e,t)=>{let{children:r,...n}=e;if(l.isValidElement(r)){var a;let e,s,i=(a=r,(s=(e=Object.getOwnPropertyDescriptor(a.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?a.ref:(s=(e=Object.getOwnPropertyDescriptor(a,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?a.props.ref:a.props.ref||a.ref),o=function(e,t){let r={...t};for(let n in t){let a=e[n],s=t[n];/^on[A-Z]/.test(n)?a&&s?r[n]=(...e)=>{let t=s(...e);return a(...e),t}:a&&(r[n]=a):"style"===n?r[n]={...a,...s}:"className"===n&&(r[n]=[a,s].filter(Boolean).join(" "))}return{...e,...r}}(n,r.props);return r.type!==l.Fragment&&(o.ref=t?d(t,i):i),l.cloneElement(r,o)}return l.Children.count(r)>1?l.Children.only(null):null})).displayName=`${n}.SlotClone`,s=a,(o=l.forwardRef((e,t)=>{let{children:r,...n}=e,a=l.Children.toArray(r),o=a.find($);if(o){let e=o.props.children,r=a.map(t=>t!==o?t:l.Children.count(e)>1?l.Children.only(null):l.isValidElement(e)?e.props.children:null);return(0,i.jsx)(s,{...n,ref:t,children:l.isValidElement(e)?l.cloneElement(e,void 0,r):null})}return(0,i.jsx)(s,{...n,ref:t,children:r})})).displayName=`${r}.Slot`,o),u=l.forwardRef((e,r)=>{let{asChild:n,...a}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,i.jsx)(n?c:t,{...a,ref:r})});return u.displayName=`Primitive.${t}`,{...e,[t]:u}},{}),F="Checkbox",[W,B]=function(e,t=[]){let r=[],n=()=>{let t=r.map(e=>l.createContext(e));return function(r){let n=r?.[e]||t;return l.useMemo(()=>({[`__scope${e}`]:{...r,[e]:n}}),[r,n])}};return n.scopeName=e,[function(t,n){let a=l.createContext(n),s=r.length;r=[...r,n];let o=t=>{let{scope:r,children:n,...o}=t,d=r?.[e]?.[s]||a,c=l.useMemo(()=>o,Object.values(o));return(0,i.jsx)(d.Provider,{value:c,children:n})};return o.displayName=t+"Provider",[o,function(r,i){let o=i?.[e]?.[s]||a,d=l.useContext(o);if(d)return d;if(void 0!==n)return n;throw Error(`\`${r}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let r=()=>{let r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let n=r.reduce((t,{useScope:r,scopeName:n})=>{let a=r(e)[`__scope${n}`];return{...t,...a}},{});return l.useMemo(()=>({[`__scope${t.scopeName}`]:n}),[n])}};return r.scopeName=t.scopeName,r}(n,...t)]}(F),[V,H]=W(F);function X(e){let{__scopeCheckbox:t,checked:r,children:n,defaultChecked:a,disabled:s,form:o,name:d,onCheckedChange:c,required:u,value:m="on",internal_do_not_use_render:x}=e,[p,h]=function({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){let[a,s,i]=function({defaultProp:e,onChange:t}){let[r,n]=l.useState(e),a=l.useRef(r),s=l.useRef(t);return z(()=>{s.current=t},[t]),l.useEffect(()=>{a.current!==r&&(s.current?.(r),a.current=r)},[r,a]),[r,n,s]}({defaultProp:t,onChange:r}),o=void 0!==e,d=o?e:a;{let t=l.useRef(void 0!==e);l.useEffect(()=>{let e=t.current;if(e!==o){let t=o?"controlled":"uncontrolled";console.warn(`${n} is changing from ${e?"controlled":"uncontrolled"} to ${t}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`)}t.current=o},[o,n])}return[d,l.useCallback(t=>{if(o){let r="function"==typeof t?t(e):t;r!==e&&i.current?.(r)}else s(t)},[o,e,s,i])]}({prop:r,defaultProp:a??!1,onChange:c,caller:F}),[f,g]=l.useState(null),[b,v]=l.useState(null),y=l.useRef(!1),j=!f||!!o||!!f.closest("form"),w={checked:p,disabled:s,setChecked:h,control:f,setControl:g,name:d,form:o,value:m,hasConsumerStoppedPropagationRef:y,required:u,defaultChecked:!ee(a)&&a,isFormControl:j,bubbleInput:b,setBubbleInput:v};return(0,i.jsx)(V,{scope:t,...w,children:"function"==typeof x?x(w):n})}var K="CheckboxTrigger",q=l.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:r,...n},a)=>{let{control:s,value:o,disabled:d,checked:u,required:m,setControl:x,setChecked:p,hasConsumerStoppedPropagationRef:h,isFormControl:f,bubbleInput:g}=H(K,e),b=c(a,x),v=l.useRef(u);return l.useEffect(()=>{let e=s?.form;if(e){let t=()=>p(v.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[s,p]),(0,i.jsx)(U.button,{type:"button",role:"checkbox","aria-checked":ee(u)?"mixed":u,"aria-required":m,"data-state":et(u),"data-disabled":d?"":void 0,disabled:d,value:o,...n,ref:b,onKeyDown:O(t,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:O(r,e=>{p(e=>!!ee(e)||!e),g&&f&&(h.current=e.isPropagationStopped(),h.current||e.stopPropagation())})})});q.displayName=K;var G=l.forwardRef((e,t)=>{let{__scopeCheckbox:r,name:n,checked:a,defaultChecked:s,required:l,disabled:o,value:d,onCheckedChange:c,form:u,...m}=e;return(0,i.jsx)(X,{__scopeCheckbox:r,checked:a,defaultChecked:s,disabled:o,required:l,onCheckedChange:c,name:n,form:u,value:d,internal_do_not_use_render:({isFormControl:e})=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(q,{...m,ref:t,__scopeCheckbox:r}),e&&(0,i.jsx)(Q,{__scopeCheckbox:r})]})})});G.displayName=F;var Z="CheckboxIndicator",Y=l.forwardRef((e,t)=>{let{__scopeCheckbox:r,forceMount:n,...a}=e,s=H(Z,r);return(0,i.jsx)(P,{present:n||ee(s.checked)||!0===s.checked,children:(0,i.jsx)(U.span,{"data-state":et(s.checked),"data-disabled":s.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});Y.displayName=Z;var J="CheckboxBubbleInput",Q=l.forwardRef(({__scopeCheckbox:e,...t},r)=>{let n,{control:a,hasConsumerStoppedPropagationRef:s,checked:o,defaultChecked:d,required:u,disabled:m,name:x,value:p,form:h,bubbleInput:f,setBubbleInput:g}=H(J,e),b=c(r,g),v=(n=l.useRef({value:o,previous:o}),l.useMemo(()=>(n.current.value!==o&&(n.current.previous=n.current.value,n.current.value=o),n.current.previous),[o])),y=function(e){let[t,r]=l.useState(void 0);return T(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});let t=new ResizeObserver(t=>{let n,a;if(!Array.isArray(t)||!t.length)return;let s=t[0];if("borderBoxSize"in s){let e=s.borderBoxSize,t=Array.isArray(e)?e[0]:e;n=t.inlineSize,a=t.blockSize}else n=e.offsetWidth,a=e.offsetHeight;r({width:n,height:a})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}r(void 0)},[e]),t}(a);l.useEffect(()=>{if(!f)return;let e=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,t=!s.current;if(v!==o&&e){let r=new Event("click",{bubbles:t});f.indeterminate=ee(o),e.call(f,!ee(o)&&o),f.dispatchEvent(r)}},[f,v,o,s]);let j=l.useRef(!ee(o)&&o);return(0,i.jsx)(U.input,{type:"checkbox","aria-hidden":!0,defaultChecked:d??j.current,required:u,disabled:m,name:x,value:p,form:h,...t,tabIndex:-1,ref:b,style:{...t.style,...y,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function ee(e){return"indeterminate"===e}function et(e){return ee(e)?"indeterminate":e?"checked":"unchecked"}Q.displayName=J;let er=(0,N.default)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);function en({className:e,...t}){return(0,i.jsx)(G,{"data-slot":"checkbox",className:(0,y.cn)("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:(0,i.jsx)(Y,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:(0,i.jsx)(er,{className:"size-3.5"})})})}function ea({messages:e,loading:t,view:r,onSelectMessage:n,onToggleStar:a,onDelete:s,selectedIds:l,onToggleSelect:o,onToggleSelectAll:d,onDeleteAll:c,pagination:u,onPageChange:m}){let{theme:x}=(0,_.useTheme)();return t?(0,i.jsx)("div",{className:"p-8 text-center text-gray-500",children:"Cargando mensajes..."}):0===e.length?(0,i.jsx)("div",{className:"p-8 text-center text-gray-500",children:"No hay mensajes"}):(0,i.jsxs)("div",{className:"flex flex-col h-full",children:[(0,i.jsxs)("div",{className:(0,y.cn)("flex items-center justify-between px-4 py-2 border-b","dark"===x?"border-white/10":"border-gray-200"),children:[(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsx)(en,{checked:l.length===e.length&&e.length>0,onCheckedChange:d}),l.length>0?(0,i.jsxs)(w,{variant:"ghost",size:"sm",onClick:()=>s(l),className:"text-red-500 hover:text-red-600 hover:bg-red-50",children:[(0,i.jsx)(M.Trash2,{className:"w-4 h-4 mr-2"}),"Eliminar (",l.length,")"]}):(0,i.jsxs)(w,{variant:"ghost",size:"sm",onClick:c,className:"text-red-500 hover:text-red-600 hover:bg-red-50",children:[(0,i.jsx)(M.Trash2,{className:"w-4 h-4 mr-2"}),"Eliminar todo"]})]}),(0,i.jsxs)("div",{className:"text-xs text-gray-500",children:[u.total," mensajes"]})]}),(0,i.jsx)("div",{className:"flex-1 overflow-y-auto",children:e.map(e=>{let t=l.includes(e._id),s="sent"===r||e.read;return(0,i.jsxs)("div",{className:(0,y.cn)("flex items-center gap-4 px-4 py-3 border-b cursor-pointer transition-colors group","dark"===x?"border-white/5 hover:bg-white/5":"border-gray-100 hover:bg-gray-50",t&&("dark"===x?"bg-purple-900/20":"bg-purple-50"),!s&&("dark"===x?"bg-white/5 font-medium":"bg-white font-medium")),onClick:()=>n(e),children:[(0,i.jsx)("div",{onClick:e=>e.stopPropagation(),children:(0,i.jsx)(en,{checked:t,onCheckedChange:()=>o(e._id)})}),(0,i.jsx)("button",{onClick:t=>a(t,e._id),className:(0,y.cn)("text-gray-400 hover:text-yellow-400 transition-colors",e.starred&&"text-yellow-400"),children:(0,i.jsx)(E,{className:(0,y.cn)("w-4 h-4",e.starred&&"fill-current")})}),(0,i.jsx)("div",{className:(0,y.cn)("w-48 truncate",!s&&"font-bold","dark"===x?"text-gray-200":"text-gray-900"),children:"sent"===r?`Para: ${e.to.nombre}`:e.from.nombre}),(0,i.jsxs)("div",{className:"flex-1 min-w-0 flex items-center gap-2",children:[(0,i.jsx)("span",{className:(0,y.cn)("truncate",!s&&"font-bold","dark"===x?"text-gray-200":"text-gray-900"),children:e.subject}),(0,i.jsxs)("span",{className:(0,y.cn)("truncate text-sm","text-gray-500"),children:["- ",e.content.substring(0,100)]}),e.attachments.length>0&&(0,i.jsx)(A,{className:"w-3 h-3 text-gray-400 flex-shrink-0"})]}),(0,i.jsx)("div",{className:(0,y.cn)("text-xs whitespace-nowrap",s?"text-gray-500":"text-purple-500 font-bold"),children:new Date(e.createdAt).toLocaleDateString()})]},e._id)})}),u.pages>1&&(0,i.jsxs)("div",{className:(0,y.cn)("p-4 border-t flex justify-center gap-2","dark"===x?"border-white/10":"border-gray-200"),children:[(0,i.jsx)(w,{variant:"outline",size:"sm",disabled:1===u.page,onClick:()=>m(u.page-1),children:"Anterior"}),(0,i.jsxs)("span",{className:"flex items-center text-sm text-gray-500",children:["Página ",u.page," de ",u.pages]}),(0,i.jsx)(w,{variant:"outline",size:"sm",disabled:u.page===u.pages,onClick:()=>m(u.page+1),children:"Siguiente"})]})]})}e.s(["MessageList",()=>ea],33133);var es=e.i(20927);let ei=(0,N.default)("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]),el=(0,N.default)("Forward",[["polyline",{points:"15 17 20 12 15 7",key:"1w3sku"}],["path",{d:"M4 18v-2a4 4 0 0 1 4-4h12",key:"jmiej9"}]]);var eo=e.i(33121),ed=e.i(32575),ec=e.i(8950);function eu({message:e,onBack:t,onReply:r,onForward:n,onDelete:a,onToggleStar:s}){let{theme:l}=(0,_.useTheme)(),o=async t=>{try{let r=await ed.api.internalMessages.downloadAttachment(e._id,t._id),n=window.URL.createObjectURL(new Blob([r.data])),a=document.createElement("a");a.href=n,a.setAttribute("download",t.originalName),document.body.appendChild(a),a.click(),a.remove()}catch(e){console.error("Error downloading attachment:",e),ec.toast.error("Error al descargar el archivo")}};return(0,i.jsxs)("div",{className:"flex flex-col h-full",children:[(0,i.jsxs)("div",{className:(0,y.cn)("flex items-center justify-between px-4 py-3 border-b","dark"===l?"border-white/10":"border-gray-200"),children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(w,{variant:"ghost",size:"icon",onClick:t,children:(0,i.jsx)(es.ArrowLeft,{className:"w-5 h-5"})}),(0,i.jsxs)("div",{className:"flex gap-1",children:[(0,i.jsxs)(w,{variant:"ghost",size:"sm",onClick:r,children:[(0,i.jsx)(ei,{className:"w-4 h-4 mr-2"}),"Responder"]}),(0,i.jsxs)(w,{variant:"ghost",size:"sm",onClick:n,children:[(0,i.jsx)(el,{className:"w-4 h-4 mr-2"}),"Reenviar"]}),(0,i.jsxs)(w,{variant:"ghost",size:"sm",onClick:a,className:"text-red-500 hover:text-red-600 hover:bg-red-50",children:[(0,i.jsx)(M.Trash2,{className:"w-4 h-4 mr-2"}),"Eliminar"]})]})]}),(0,i.jsx)(w,{variant:"ghost",size:"icon",onClick:s,children:(0,i.jsx)(E,{className:(0,y.cn)("w-5 h-5",e.starred?"fill-yellow-400 text-yellow-400":"text-gray-400")})})]}),(0,i.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("h1",{className:(0,y.cn)("text-2xl font-bold","dark"===l?"text-white":"text-gray-900"),children:e.subject}),(0,i.jsxs)("div",{className:"flex items-start justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("div",{className:(0,y.cn)("w-10 h-10 rounded-full flex items-center justify-center text-white font-bold","dark"===l?"bg-purple-600":"bg-[#00C794]"),children:e.from.nombre.substring(0,2).toUpperCase()}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:(0,y.cn)("font-medium","dark"===l?"text-white":"text-gray-900"),children:[e.from.nombre," ",(0,i.jsxs)("span",{className:"text-gray-500 font-normal",children:["<",e.from.email,">"]})]}),(0,i.jsxs)("div",{className:"text-sm text-gray-500",children:["Para: ",e.to.nombre]})]})]}),(0,i.jsx)("div",{className:"text-sm text-gray-500",children:new Date(e.createdAt).toLocaleString()})]})]}),(0,i.jsx)("hr",{className:(0,y.cn)("dark"===l?"border-white/10":"border-gray-200")}),(0,i.jsx)("div",{className:(0,y.cn)("whitespace-pre-wrap leading-relaxed","dark"===l?"text-gray-200":"text-gray-800"),children:e.content}),e.attachments.length>0&&(0,i.jsxs)("div",{className:"pt-6",children:[(0,i.jsxs)("h3",{className:(0,y.cn)("text-sm font-medium mb-3 flex items-center gap-2","dark"===l?"text-gray-300":"text-gray-700"),children:[(0,i.jsx)(A,{className:"w-4 h-4"}),"Adjuntos (",e.attachments.length,")"]}),(0,i.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:e.attachments.map(e=>(0,i.jsxs)("div",{className:(0,y.cn)("flex items-center justify-between p-3 rounded-lg border","dark"===l?"bg-white/5 border-white/10":"bg-white border-gray-200"),children:[(0,i.jsxs)("div",{className:"flex items-center gap-3 min-w-0",children:[(0,i.jsx)("div",{className:(0,y.cn)("w-8 h-8 rounded flex items-center justify-center flex-shrink-0","dark"===l?"bg-white/10":"bg-gray-100"),children:(0,i.jsx)("span",{className:"text-xs font-bold uppercase",children:e.originalName.split(".").pop()})}),(0,i.jsxs)("div",{className:"min-w-0",children:[(0,i.jsx)("p",{className:(0,y.cn)("text-sm font-medium truncate","dark"===l?"text-gray-200":"text-gray-800"),children:e.originalName}),(0,i.jsxs)("p",{className:"text-xs text-gray-500",children:[(e.size/1024).toFixed(1)," KB"]})]})]}),(0,i.jsx)(w,{variant:"ghost",size:"icon",onClick:()=>o(e),children:(0,i.jsx)(eo.Download,{className:"w-4 h-4"})})]},e._id))})]})]})]})}e.s(["MessageDetail",()=>eu],29396);var em=e.i(20483);function ex({className:e,type:t,...r}){return(0,i.jsx)("input",{type:t,"data-slot":"input",className:(0,y.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...r})}function ep({className:e,...t}){return(0,i.jsx)("textarea",{"data-slot":"textarea",className:(0,y.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}function eh({isOpen:e,onClose:t,initialData:r,onSent:n}){let{theme:a}=(0,_.useTheme)(),[s,o]=(0,l.useState)("users"),[d,c]=(0,l.useState)([]),[u,m]=(0,l.useState)([]),[x,p]=(0,l.useState)([]),[h,f]=(0,l.useState)(""),[g,b]=(0,l.useState)(r?.subject||""),[v,j]=(0,l.useState)(r?.content||""),[N,k]=(0,l.useState)([]),[E,S]=(0,l.useState)(!1);(0,l.useEffect)(()=>{e&&(R(),r&&(b(r.subject||""),j(r.content||"")))},[e,r]);let R=async(e="")=>{try{let t=await ed.api.internalMessages.getRecipients(e);if(m(t.data),r?.to&&r.to.length>0){let e=t.data.filter(e=>r.to?.includes(e._id));p(t=>{let r=e.filter(e=>!t.find(t=>t._id===e._id));return[...t,...r]})}}catch(e){console.error("Error loading recipients:",e)}},M=async()=>{if("users"===s&&0===x.length)return void ec.toast.error("Seleccione al menos un destinatario");if("roles"===s&&0===d.length)return void ec.toast.error("Seleccione al menos un rol");if(!v.trim())return void ec.toast.error("El mensaje no puede estar vacío");S(!0);try{let e=new FormData;"users"===s?x.forEach(t=>e.append("to[]",t._id)):d.forEach(t=>e.append("roles[]",t)),e.append("subject",g),e.append("content",v),r?.replyTo&&e.append("replyTo",r.replyTo),r?.isForward&&e.append("isForward","true"),N.forEach(t=>{e.append("attachments",t)}),await ed.api.internalMessages.send(e),ec.toast.success("Mensaje enviado"),n(),t()}catch(e){console.error("Error sending message:",e),ec.toast.error("Error al enviar el mensaje")}finally{S(!1)}},O=e=>{p(t=>t.find(t=>t._id===e._id)?t.filter(t=>t._id!==e._id):[...t,e])};return e?(0,I.createPortal)((0,i.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:(0,i.jsxs)("div",{className:(0,y.cn)("w-full max-w-2xl h-[80vh] flex flex-col rounded-xl shadow-2xl overflow-hidden","dark"===a?"bg-[#1a1333] border border-white/10":"bg-white"),children:[(0,i.jsxs)("div",{className:(0,y.cn)("flex items-center justify-between px-6 py-4 border-b","dark"===a?"border-white/10":"border-gray-100"),children:[(0,i.jsx)("h2",{className:(0,y.cn)("text-lg font-semibold","dark"===a?"text-white":"text-gray-900"),children:"Nuevo Mensaje"}),(0,i.jsx)("button",{onClick:t,className:(0,y.cn)("p-2 rounded-lg transition-colors","dark"===a?"hover:bg-white/10 text-gray-400":"hover:bg-gray-100 text-gray-500"),children:(0,i.jsx)(em.X,{className:"w-5 h-5"})})]}),(0,i.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[(0,i.jsxs)("div",{className:"flex gap-4 mb-2",children:[(0,i.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,i.jsx)("input",{type:"radio",name:"sendMode",checked:"users"===s,onChange:()=>o("users"),className:(0,y.cn)("focus:ring-2","dark"===a?"text-purple-600 focus:ring-purple-500":"text-[#00C794] focus:ring-[#00C794]")}),(0,i.jsx)("span",{className:(0,y.cn)("text-sm","dark"===a?"text-gray-300":"text-gray-700"),children:"Usuarios"})]}),(0,i.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,i.jsx)("input",{type:"radio",name:"sendMode",checked:"roles"===s,onChange:()=>o("roles"),className:(0,y.cn)("focus:ring-2","dark"===a?"text-purple-600 focus:ring-purple-500":"text-[#00C794] focus:ring-[#00C794]")}),(0,i.jsx)("span",{className:(0,y.cn)("text-sm","dark"===a?"text-gray-300":"text-gray-700"),children:"Roles (Grupos)"})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)("label",{className:(0,y.cn)("text-sm font-medium","dark"===a?"text-gray-300":"text-gray-700"),children:"Para:"}),"users"===s?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:(0,y.cn)("flex flex-wrap gap-2 p-2 rounded-lg border min-h-[42px]","dark"===a?"bg-white/5 border-white/10":"bg-white border-gray-200"),children:[x.map(e=>(0,i.jsxs)("span",{className:(0,y.cn)("text-xs px-2 py-1 rounded-full flex items-center gap-1","dark"===a?"bg-purple-500/20 text-purple-300":"bg-[#00C794]/20 text-[#0078A0]"),children:[e.nombre,(0,i.jsx)("button",{onClick:()=>O(e),className:"hover:text-red-500",children:(0,i.jsx)(em.X,{className:"w-3 h-3"})})]},e._id)),(0,i.jsx)("input",{type:"text",placeholder:"Buscar destinatario...",className:"bg-transparent border-none outline-none text-sm flex-1 min-w-[150px]",value:h,onChange:e=>{f(e.target.value),R(e.target.value)}})]}),h&&(0,i.jsx)("div",{className:(0,y.cn)("max-h-40 overflow-y-auto border rounded-lg","dark"===a?"bg-[#1a1333] border-white/10":"bg-white border-gray-200"),children:u.filter(e=>!x.find(t=>t._id===e._id)).map(e=>(0,i.jsxs)("div",{className:(0,y.cn)("px-3 py-2 cursor-pointer text-sm flex items-center justify-between","dark"===a?"hover:bg-white/5 text-gray-300":"hover:bg-gray-50 text-gray-700"),onClick:()=>{O(e),f("")},children:[(0,i.jsx)("span",{children:e.nombre}),(0,i.jsx)("span",{className:"text-xs opacity-50",children:e.role})]},e._id))})]}):(0,i.jsx)("div",{className:"flex flex-wrap gap-2",children:[{id:"admin",label:"Administrador"},{id:"gerencia",label:"Gerencia"},{id:"supervisor",label:"Supervisor"},{id:"asesor",label:"Asesor"},{id:"auditor",label:"Auditor"},{id:"rr.hh",label:"RR.HH"},{id:"administrativo",label:"Administrativo"}].map(e=>(0,i.jsx)("button",{onClick:()=>{var t;return t=e.id,void c(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t])},className:(0,y.cn)("px-3 py-1.5 rounded-lg text-sm border transition-colors",d.includes(e.id)?"dark"===a?"bg-purple-600 text-white border-purple-600":"bg-[#00C794] text-white border-[#00C794]":"dark"===a?"bg-white/5 border-white/10 text-gray-300 hover:bg-white/10":"bg-white border-gray-200 text-gray-700 hover:bg-gray-50"),children:e.label},e.id))})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)("label",{className:(0,y.cn)("text-sm font-medium","dark"===a?"text-gray-300":"text-gray-700"),children:"Asunto:"}),(0,i.jsx)(ex,{value:g,onChange:e=>b(e.target.value),placeholder:"Asunto del mensaje",className:(0,y.cn)("dark"===a?"bg-white/5 border-white/10":"bg-white")})]}),(0,i.jsxs)("div",{className:"space-y-2 flex-1 flex flex-col",children:[(0,i.jsx)("label",{className:(0,y.cn)("text-sm font-medium","dark"===a?"text-gray-300":"text-gray-700"),children:"Mensaje:"}),(0,i.jsx)(ep,{value:v,onChange:e=>j(e.target.value),placeholder:"Escribe tu mensaje aquí...",className:(0,y.cn)("flex-1 min-h-[200px] resize-none","dark"===a?"bg-white/5 border-white/10":"bg-white")})]}),N.length>0&&(0,i.jsx)("div",{className:"flex flex-wrap gap-2",children:N.map((e,t)=>(0,i.jsxs)("div",{className:(0,y.cn)("flex items-center gap-2 px-3 py-1 rounded-lg text-xs border","dark"===a?"bg-white/5 border-white/10 text-gray-300":"bg-gray-50 border-gray-200 text-gray-700"),children:[(0,i.jsx)(A,{className:"w-3 h-3"}),(0,i.jsx)("span",{className:"max-w-[150px] truncate",children:e.name}),(0,i.jsx)("button",{onClick:()=>{k(e=>e.filter((e,r)=>r!==t))},className:"hover:text-red-500",children:(0,i.jsx)(em.X,{className:"w-3 h-3"})})]},t))})]}),(0,i.jsxs)("div",{className:(0,y.cn)("px-6 py-4 border-t flex items-center justify-between","dark"===a?"border-white/10":"border-gray-100"),children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("input",{type:"file",id:"attachments",multiple:!0,className:"hidden",onChange:e=>{e.target.files&&k(t=>[...t,...Array.from(e.target.files)])}}),(0,i.jsxs)("label",{htmlFor:"attachments",className:(0,y.cn)("flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium cursor-pointer transition-colors","dark"===a?"hover:bg-white/10 text-gray-400":"hover:bg-gray-100 text-gray-600"),children:[(0,i.jsx)(A,{className:"w-4 h-4"}),"Adjuntar archivo"]})]}),(0,i.jsxs)("div",{className:"flex gap-3",children:[(0,i.jsx)(w,{variant:"ghost",onClick:t,children:"Cancelar"}),(0,i.jsxs)(w,{onClick:M,disabled:E,className:(0,y.cn)("text-white gap-2","dark"===a?"bg-purple-600 hover:bg-purple-700":"bg-[#00C794] hover:bg-[#00a87d]"),children:[(0,i.jsx)(C.Send,{className:"w-4 h-4"}),E?"Enviando...":"Enviar"]})]})]})]})}),document.body):null}e.s(["ComposeModal",()=>eh],74402)}]);