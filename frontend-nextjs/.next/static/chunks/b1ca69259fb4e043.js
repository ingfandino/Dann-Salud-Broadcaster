(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,45155,85744,e=>{"use strict";var t=e.i(49163);let a=(0,t.default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>a],45155);let r=(0,t.default)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);e.s(["EyeOff",()=>r],85744)},90167,e=>{"use strict";let t=(0,e.i(49163).default)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);e.s(["Mail",()=>t],90167)},20927,e=>{"use strict";let t=(0,e.i(49163).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],20927)},51444,e=>{"use strict";let t=(0,e.i(49163).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>t],51444)},96241,e=>{"use strict";let t=(0,e.i(49163).default)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["Save",()=>t],96241)},81114,e=>{"use strict";let t=(0,e.i(49163).default)("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);e.s(["Package",()=>t],81114)},37239,e=>{"use strict";let t=(0,e.i(49163).default)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Settings",()=>t],37239)},59173,e=>{"use strict";var t=e.i(13161),a=e.i(37239),r=e.i(7020),s=e.i(81114),l=e.i(316),i=e.i(51444),n=e.i(96241),d=e.i(72079),o=e.i(31981),c=e.i(91447),x=e.i(32575),g=e.i(8950),h=e.i(97220);function u(){let{theme:e}=(0,d.useTheme)(),{user:u}=(0,h.useAuth)(),[m,b]=(0,c.useState)(!1),[p,y]=(0,c.useState)([]),[f,w]=(0,c.useState)([]);(0,c.useEffect)(()=>{let e=async()=>{try{let e=(await x.api.users.list()).data,t=[];u?.role==="gerencia"||u?.role==="admin"?t=e.filter(e=>!0===e.active&&("asesor"===e.role||"auditor"===e.role&&e.numeroEquipo)):u?.role==="supervisor"&&(t=e.filter(e=>!0===e.active&&("asesor"===e.role||"auditor"===e.role)&&e.numeroEquipo===u.numeroEquipo)),t.sort((e,t)=>{let a=e.numeroEquipo?parseInt(e.numeroEquipo):999999,r=t.numeroEquipo?parseInt(t.numeroEquipo):999999;return a!==r?a-r:e.nombre.localeCompare(t.nombre)}),y(t)}catch(e){console.error("Error cargando usuarios:",e),g.toast.error("Error al cargar lista de asesores")}};u&&e()},[u]);let j=(e,t,a)=>{w(f.map(r=>r.id!==e?r:"freshPercentage"===t?{...r,mix:{freshPercentage:Number(a),reusablePercentage:100-Number(a)}}:{...r,[t]:a}))},[v,k]=(0,c.useState)(null),N=async()=>{if(0===f.length)return void g.toast.error("Agrega al menos un asesor para distribuir");if(f.find(e=>!e.asesorId||e.quantity<=0))return void g.toast.error("Completa todos los campos de asesor y cantidad");b(!0);try{let e={distribution:f.map(({asesorId:e,quantity:t,mix:a})=>({asesorId:e,quantity:Number(t),mix:a}))};if(await x.api.assignments.distribute(e),g.toast.success("Distribución completada exitosamente"),w([]),u?.role==="supervisor"){let e=await x.api.affiliates.getSupervisorStats();k(e.data)}}catch(e){console.error("Error distribuyendo:",e),g.toast.error("Error al realizar la distribución")}finally{b(!1)}};return(0,c.useEffect)(()=>{u?.role==="supervisor"&&(async()=>{try{let e=await x.api.affiliates.getSupervisorStats();k(e.data)}catch(e){console.error("Error fetching supervisor stats:",e)}})()},[u]),(0,t.jsxs)("div",{className:"animate-fade-in-up space-y-4",children:[(0,t.jsxs)("div",{className:(0,o.cn)("rounded-2xl border p-4 lg:p-6 backdrop-blur-sm","dark"===e?"bg-gradient-to-br from-white/5 to-white/[0.02] border-white/10":"bg-gradient-to-br from-white to-[#FAF7F2]/80 border-purple-200/30 shadow-lg shadow-purple-100/30"),children:[(0,t.jsxs)("h2",{className:(0,o.cn)("text-lg lg:text-xl font-semibold flex items-center gap-2","dark"===e?"text-white":"text-gray-700"),children:[(0,t.jsx)(a.Settings,{className:(0,o.cn)("w-5 h-5","dark"===e?"text-purple-400":"text-purple-500")}),"Administración de Datos"]}),(0,t.jsx)("p",{className:(0,o.cn)("text-sm mt-2","dark"===e?"text-gray-400":"text-gray-600"),children:"Configura la distribución digital de afiliados a los asesores."})]}),u?.role==="supervisor"&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:(0,o.cn)("rounded-2xl border p-6 backdrop-blur-sm","dark"===e?"bg-gradient-to-br from-white/5 to-white/[0.02] border-white/10":"bg-gradient-to-br from-white to-[#FAF7F2]/80 border-purple-200/30 shadow-lg shadow-purple-100/30"),children:[(0,t.jsx)("h2",{className:(0,o.cn)("text-xl font-semibold flex items-center gap-2 mb-6","dark"===e?"text-white":"text-gray-800"),children:"Disponibilidad de Datos"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:(0,o.cn)("p-6 rounded-2xl border transition-all duration-300","dark"===e?"bg-emerald-500/10 border-emerald-500/20 hover:bg-emerald-500/20":"bg-emerald-50 border-emerald-200 hover:bg-emerald-100"),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("span",{className:(0,o.cn)("text-sm font-medium","dark"===e?"text-emerald-300":"text-emerald-700"),children:"Datos Frescos"}),(0,t.jsx)("div",{className:(0,o.cn)("p-2 rounded-lg","dark"===e?"bg-emerald-500/20":"bg-emerald-200"),children:(0,t.jsx)(r.Users,{className:(0,o.cn)("w-5 h-5","dark"===e?"text-emerald-400":"text-emerald-600")})})]}),(0,t.jsx)("div",{className:(0,o.cn)("text-3xl font-bold","dark"===e?"text-white":"text-gray-900"),children:v?.freshCount||0}),(0,t.jsx)("p",{className:(0,o.cn)("text-xs mt-2","dark"===e?"text-gray-400":"text-gray-500"),children:"Disponibles para asignar"})]}),(0,t.jsxs)("div",{className:(0,o.cn)("p-6 rounded-2xl border transition-all duration-300","dark"===e?"bg-blue-500/10 border-blue-500/20 hover:bg-blue-500/20":"bg-blue-50 border-blue-200 hover:bg-blue-100"),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("span",{className:(0,o.cn)("text-sm font-medium","dark"===e?"text-blue-300":"text-blue-700"),children:"Datos Reutilizables"}),(0,t.jsx)("div",{className:(0,o.cn)("p-2 rounded-lg","dark"===e?"bg-blue-500/20":"bg-blue-200"),children:(0,t.jsx)(s.Package,{className:(0,o.cn)("w-5 h-5","dark"===e?"text-blue-400":"text-blue-600")})})]}),(0,t.jsx)("div",{className:(0,o.cn)("text-3xl font-bold","dark"===e?"text-white":"text-gray-900"),children:v?.reusableCount||0}),(0,t.jsx)("p",{className:(0,o.cn)("text-xs mt-2","dark"===e?"text-gray-400":"text-gray-500"),children:"Disponibles para re-asignar"})]})]})]}),(0,t.jsxs)("div",{className:(0,o.cn)("rounded-2xl border p-6 backdrop-blur-sm","dark"===e?"bg-gradient-to-br from-white/5 to-white/[0.02] border-white/10":"bg-gradient-to-br from-white to-[#FAF7F2]/80 border-purple-200/30 shadow-lg shadow-purple-100/30"),children:[(0,t.jsx)("h3",{className:(0,o.cn)("text-lg font-semibold mb-4","dark"===e?"text-white":"text-gray-800"),children:"Detalle por Obra Social"}),v?.byObraSocial&&v.byObraSocial.length>0?(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:v.byObraSocial.map((a,r)=>(0,t.jsxs)("div",{className:(0,o.cn)("flex items-center justify-between p-3 rounded-xl border","dark"===e?"bg-white/5 border-white/10":"bg-white border-gray-100"),children:[(0,t.jsx)("span",{className:(0,o.cn)("text-sm font-medium truncate flex-1","dark"===e?"text-gray-300":"text-gray-700"),children:a.obraSocial||"Sin especificar"}),(0,t.jsx)("span",{className:(0,o.cn)("text-sm font-bold px-2 py-1 rounded-lg ml-2","dark"===e?"bg-purple-500/20 text-purple-300":"bg-purple-100 text-purple-700"),children:a.count})]},r))}):(0,t.jsx)("div",{className:(0,o.cn)("text-center py-8 text-sm","dark"===e?"text-gray-500":"text-gray-400"),children:"No hay datos disponibles"})]})]}),(0,t.jsxs)("div",{className:(0,o.cn)("rounded-2xl border p-4 lg:p-6 backdrop-blur-sm","dark"===e?"bg-gradient-to-br from-white/5 to-white/[0.02] border-white/10":"bg-gradient-to-br from-white to-[#FAF7F2]/80 border-purple-200/30 shadow-lg shadow-purple-100/30"),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("h3",{className:(0,o.cn)("font-semibold flex items-center gap-2","dark"===e?"text-orange-400":"text-orange-500"),children:[(0,t.jsx)(s.Package,{className:"w-4 h-4"}),"Configuración de Distribución"]}),(0,t.jsxs)("button",{onClick:()=>{w([...f,{id:Math.random().toString(36).substr(2,9),asesorId:"",quantity:50,mix:{freshPercentage:50,reusablePercentage:50}}])},className:(0,o.cn)("flex items-center gap-1 px-3 py-1.5 rounded-lg text-sm font-medium transition-colors","dark"===e?"bg-green-500/20 text-green-400 hover:bg-green-500/30":"bg-green-100 text-green-600 hover:bg-green-200"),children:[(0,t.jsx)(l.Plus,{className:"w-4 h-4"}),"Agregar Asesor"]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[0===f.length&&(0,t.jsx)("div",{className:(0,o.cn)("text-center py-8 text-sm","dark"===e?"text-gray-500":"text-gray-400"),children:'No hay configuraciones. Haz clic en "Agregar Asesor" para comenzar.'}),f.map((a,r)=>(0,t.jsxs)("div",{className:(0,o.cn)("rounded-xl border p-4 transition-all","dark"===e?"border-white/10 bg-white/5":"border-gray-200 bg-gray-50"),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsxs)("span",{className:(0,o.cn)("font-medium text-sm","dark"===e?"text-white":"text-gray-700"),children:["Asignación #",r+1]}),(0,t.jsx)("button",{onClick:()=>{var e;return e=a.id,void w(f.filter(t=>t.id!==e))},className:"text-red-400 hover:text-red-500 transition-colors",children:(0,t.jsx)(i.Trash2,{className:"w-4 h-4"})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-3 items-end",children:[(0,t.jsxs)("div",{className:"lg:col-span-4",children:[(0,t.jsx)("label",{className:(0,o.cn)("text-xs mb-1 block","dark"===e?"text-gray-400":"text-gray-500"),children:"Asesor"}),(0,t.jsxs)("select",{value:a.asesorId,onChange:e=>j(a.id,"asesorId",e.target.value),className:(0,o.cn)("w-full px-3 py-2 rounded-lg border text-sm","dark"===e?"bg-white/5 border-white/10 text-white":"bg-white border-gray-200 text-gray-700"),children:[(0,t.jsx)("option",{value:"",children:"-- Seleccione --"}),p.map(e=>(0,t.jsxs)("option",{value:e._id,children:[e.nombre," ",e.numeroEquipo?`(Eq: ${e.numeroEquipo})`:""]},e._id))]})]}),(0,t.jsxs)("div",{className:"lg:col-span-2",children:[(0,t.jsx)("label",{className:(0,o.cn)("text-xs mb-1 block","dark"===e?"text-gray-400":"text-gray-500"),children:"Cantidad"}),(0,t.jsx)("input",{type:"number",value:a.quantity,onChange:e=>j(a.id,"quantity",e.target.value),className:(0,o.cn)("w-full px-3 py-2 rounded-lg border text-sm","dark"===e?"bg-white/5 border-white/10 text-white":"bg-white border-gray-200 text-gray-700")})]}),(0,t.jsxs)("div",{className:"lg:col-span-6",children:[(0,t.jsxs)("label",{className:(0,o.cn)("text-xs mb-1 block flex justify-between","dark"===e?"text-gray-400":"text-gray-500"),children:[(0,t.jsxs)("span",{children:["Mezcla: ",a.mix.freshPercentage,"% Frescos"]}),(0,t.jsxs)("span",{children:[a.mix.reusablePercentage,"% Reutilizables"]})]}),(0,t.jsx)("input",{type:"range",min:"0",max:"100",step:"10",value:a.mix.freshPercentage,onChange:e=>j(a.id,"freshPercentage",e.target.value),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700"})]})]})]},a.id))]})]}),(0,t.jsx)("button",{onClick:N,disabled:m||0===f.length,className:(0,o.cn)("flex items-center gap-2 px-6 py-3 rounded-xl font-semibold transition-all duration-200 hover:scale-105 disabled:opacity-50 disabled:hover:scale-100","dark"===e?"bg-gradient-to-r from-blue-600 to-blue-500 text-white hover:from-blue-500 hover:to-blue-400":"bg-gradient-to-r from-blue-500 to-blue-400 text-white hover:from-blue-400 hover:to-blue-300"),children:m?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Procesando..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.Save,{className:"w-4 h-4"}),"Ejecutar Distribución"]})})]})}e.s(["ContactarAdministracion",()=>u])},20277,e=>{"use strict";let t=(0,e.i(49163).default)("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);e.s(["MessageCircle",()=>t],20277)},32905,e=>{"use strict";let t=(0,e.i(49163).default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);e.s(["RefreshCw",()=>t],32905)},47248,e=>{"use strict";let t=(0,e.i(49163).default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],47248)},98275,e=>{"use strict";let t=(0,e.i(49163).default)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);e.s(["Send",()=>t],98275)},33121,e=>{"use strict";let t=(0,e.i(49163).default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);e.s(["Download",()=>t],33121)},26374,e=>{"use strict";let t=(0,e.i(49163).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>t],26374)},2372,e=>{"use strict";let t=(0,e.i(49163).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>t],2372)},60444,e=>{"use strict";let t=(0,e.i(49163).default)("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);e.s(["Table",()=>t],60444)},20095,e=>{"use strict";var t=e.i(13161),a=e.i(60444),r=e.i(53609),s=e.i(33121),l=e.i(32905),i=e.i(77982),n=e.i(20277),d=e.i(2372),o=e.i(47248),c=e.i(98275),x=e.i(20483),g=e.i(26374),h=e.i(72079),u=e.i(31981),m=e.i(91447),b=e.i(32575),p=e.i(8950);function y(){let{theme:e}=(0,h.useTheme)(),[y,f]=(0,m.useState)(!1),[w,j]=(0,m.useState)([]),[v,k]=(0,m.useState)(""),[N,C]=(0,m.useState)(!1),[S,E]=(0,m.useState)(null),[M,A]=(0,m.useState)(""),[F,D]=(0,m.useState)(!1),[z,P]=(0,m.useState)(!1),[q,L]=(0,m.useState)(""),[T,I]=(0,m.useState)(""),[O,R]=(0,m.useState)(!1),_=async()=>{f(!0);try{let e=await b.api.assignments.getMyLeads();j(e.data)}catch(e){console.error("Error cargando leads:",e),p.toast.error("Error al cargar tus datos del día")}finally{f(!1)}};(0,m.useEffect)(()=>{_()},[]);let V=async(e,t)=>{try{j(w.map(a=>a._id===e?{...a,status:t}:a)),await b.api.assignments.updateStatus(e,{status:t}),p.toast.success(`Estado actualizado a ${t}`)}catch(e){console.error("Error actualizando estado:",e),p.toast.error("Error al actualizar estado"),_()}},H=async()=>{if(S&&M.trim()){D(!0);try{await b.api.assignments.sendWhatsApp(S._id,{message:M}),p.toast.success("Mensaje enviado correctamente"),C(!1),j(w.map(e=>e._id===S._id?{...e,status:"En Gestión"}:e))}catch(e){console.error("Error enviando WA:",e),p.toast.error(e.response?.data?.error||"Error al enviar mensaje")}finally{D(!1)}}},G=async()=>{if(S&&q){R(!0);try{await b.api.assignments.reschedule(S._id,{date:new Date(q).toISOString(),note:T}),p.toast.success("Reprogramado exitosamente"),P(!1),j(w.map(e=>e._id===S._id?{...e,status:"En Gestión",subStatus:"Reprogramado"}:e))}catch(e){console.error("Error reprogramando:",e),p.toast.error(e.response?.data?.error||"Error al reprogramar")}finally{R(!1)}}},U=w.filter(e=>{let t=v.toLowerCase();return e.affiliate?.nombre?.toLowerCase().includes(t)||e.affiliate?.telefono1?.includes(t)||e.affiliate?.cuil?.includes(t)}),B=async()=>{try{let e=await b.api.assignments.exportMyLeads(),t=window.URL.createObjectURL(new Blob([e.data])),a=document.createElement("a");a.href=t,a.setAttribute("download",`mis_leads_${new Date().toISOString().split("T")[0]}.xlsx`),document.body.appendChild(a),a.click(),a.remove(),p.toast.success("Excel exportado correctamente")}catch(e){console.error("Error exportando:",e),p.toast.error("Error al exportar Excel")}};return(0,t.jsxs)("div",{className:"animate-fade-in-up space-y-4 relative",children:[(0,t.jsxs)("div",{className:(0,u.cn)("rounded-2xl border p-4 lg:p-6 backdrop-blur-sm","dark"===e?"bg-gradient-to-br from-white/5 to-white/[0.02] border-white/10":"bg-gradient-to-br from-white to-[#FAF7F2]/80 border-purple-200/30 shadow-lg shadow-purple-100/30"),children:[(0,t.jsxs)("h2",{className:(0,u.cn)("text-lg lg:text-xl font-semibold flex items-center gap-2","dark"===e?"text-white":"text-gray-700"),children:[(0,t.jsx)(a.Table,{className:(0,u.cn)("w-5 h-5","dark"===e?"text-purple-400":"text-purple-500")}),"Datos del Día"]}),(0,t.jsxs)("p",{className:(0,u.cn)("text-sm mt-2","dark"===e?"text-gray-400":"text-gray-600"),children:["Gestiona tus asignaciones diarias. Total: ",w.length]})]}),(0,t.jsxs)("div",{className:(0,u.cn)("rounded-2xl border p-4 backdrop-blur-sm flex flex-col sm:flex-row gap-3 items-center justify-between","dark"===e?"bg-gradient-to-br from-white/5 to-white/[0.02] border-white/10":"bg-gradient-to-br from-white to-[#FAF7F2]/80 border-purple-200/30 shadow-lg shadow-purple-100/30"),children:[(0,t.jsxs)("div",{className:"relative flex-1 w-full sm:w-auto",children:[(0,t.jsx)(r.Search,{className:(0,u.cn)("absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4","dark"===e?"text-gray-400":"text-gray-500")}),(0,t.jsx)("input",{type:"text",placeholder:"Buscar por nombre, teléfono o CUIL...",value:v,onChange:e=>k(e.target.value),className:(0,u.cn)("pl-10 pr-4 py-2 w-full rounded-lg border text-sm","dark"===e?"bg-white/5 border-white/10 text-white placeholder-gray-500":"bg-white border-gray-200 text-gray-700 placeholder-gray-400")})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)("button",{onClick:B,className:(0,u.cn)("flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors","dark"===e?"bg-green-500/20 text-green-400 hover:bg-green-500/30":"bg-green-100 text-green-600 hover:bg-green-200"),children:[(0,t.jsx)(s.Download,{className:"w-4 h-4"}),"Exportar Excel"]}),(0,t.jsxs)("button",{onClick:_,className:(0,u.cn)("flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors","dark"===e?"bg-blue-500/20 text-blue-400 hover:bg-blue-500/30":"bg-blue-100 text-blue-600 hover:bg-blue-200"),children:[(0,t.jsx)(l.RefreshCw,{className:(0,u.cn)("w-4 h-4",y&&"animate-spin")}),"Actualizar"]})]})]}),(0,t.jsx)("div",{className:(0,u.cn)("rounded-2xl border backdrop-blur-sm overflow-hidden","dark"===e?"bg-gradient-to-br from-white/5 to-white/[0.02] border-white/10":"bg-gradient-to-br from-white to-[#FAF7F2]/80 border-purple-200/30 shadow-lg shadow-purple-100/30"),children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:(0,u.cn)("border-b","dark"===e?"bg-white/5 border-white/10":"bg-purple-50/50 border-purple-100"),children:[(0,t.jsx)("th",{className:(0,u.cn)("px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider","dark"===e?"text-gray-300":"text-gray-700"),children:"Afiliado"}),(0,t.jsx)("th",{className:(0,u.cn)("px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider","dark"===e?"text-gray-300":"text-gray-700"),children:"Datos Contacto"}),(0,t.jsx)("th",{className:(0,u.cn)("px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider","dark"===e?"text-gray-300":"text-gray-700"),children:"Estado"}),(0,t.jsx)("th",{className:(0,u.cn)("px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider","dark"===e?"text-gray-300":"text-gray-700"),children:"Acciones"})]})}),(0,t.jsxs)("tbody",{className:(0,u.cn)("divide-y","dark"===e?"divide-white/10":"divide-gray-200"),children:[U.map(a=>(0,t.jsxs)("tr",{className:(0,u.cn)("transition-colors","dark"===e?"hover:bg-white/5":"hover:bg-purple-50/30"),children:[(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:(0,u.cn)("font-medium text-sm","dark"===e?"text-white":"text-gray-900"),children:a.affiliate?.nombre||"Sin Nombre"}),(0,t.jsxs)("span",{className:(0,u.cn)("text-xs","dark"===e?"text-gray-400":"text-gray-500"),children:["CUIL: ",a.affiliate?.cuil||"-"]}),(0,t.jsx)("span",{className:(0,u.cn)("text-xs","dark"===e?"text-gray-400":"text-gray-500"),children:a.affiliate?.localidad})]})}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(i.Phone,{className:"w-3 h-3 text-gray-400"}),(0,t.jsx)("span",{className:(0,u.cn)("text-sm","dark"===e?"text-gray-300":"text-gray-600"),children:a.affiliate?.telefono1})]}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)("span",{className:(0,u.cn)("text-xs px-2 py-0.5 rounded-full border","dark"===e?"border-gray-700 text-gray-400":"border-gray-200 text-gray-500"),children:a.affiliate?.obraSocial||"Sin OS"})})]})}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsxs)("select",{value:a.status,onChange:e=>V(a._id,e.target.value),className:(0,u.cn)("px-2 py-1 rounded-md text-xs font-medium border-none outline-none cursor-pointer",(t=>{switch(t){case"Pendiente":return"dark"===e?"bg-yellow-500/20 text-yellow-400":"bg-yellow-100 text-yellow-700";case"En Gestión":return"dark"===e?"bg-blue-500/20 text-blue-400":"bg-blue-100 text-blue-700";case"Contactado":return"dark"===e?"bg-purple-500/20 text-purple-400":"bg-purple-100 text-purple-700";case"Venta":return"dark"===e?"bg-green-500/20 text-green-400":"bg-green-100 text-green-700";case"No Interesa":return"dark"===e?"bg-red-500/20 text-red-400":"bg-red-100 text-red-700";default:return"dark"===e?"bg-gray-500/20 text-gray-400":"bg-gray-100 text-gray-700"}})(a.status)),children:[(0,t.jsx)("option",{value:"Pendiente",children:"Pendiente"}),(0,t.jsx)("option",{value:"En Gestión",children:"En Gestión"}),(0,t.jsx)("option",{value:"Contactado",children:"Contactado"}),(0,t.jsx)("option",{value:"Venta",children:"Venta"}),(0,t.jsx)("option",{value:"No Interesa",children:"No Interesa"}),(0,t.jsx)("option",{value:"No Contesta",children:"No Contesta"})]}),a.subStatus&&(0,t.jsx)("span",{className:(0,u.cn)("text-[10px] italic","dark"===e?"text-gray-400":"text-gray-500"),children:a.subStatus})]})}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>{E(a),A(`Hola ${a.affiliate.nombre}, soy de Dann Salud. Te contacto por tu consulta sobre obra social.`),C(!0)},className:(0,u.cn)("p-2 rounded-lg transition-colors","dark"===e?"bg-green-500/20 text-green-400 hover:bg-green-500/30":"bg-green-100 text-green-600 hover:bg-green-200"),title:"Enviar WhatsApp",children:(0,t.jsx)(n.MessageCircle,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:()=>{let e;return E(a),void((e=new Date).setDate(e.getDate()+1),e.setHours(10,0,0,0),L(e.toISOString().slice(0,16)),I(""),P(!0))},className:(0,u.cn)("p-2 rounded-lg transition-colors","dark"===e?"bg-blue-500/20 text-blue-400 hover:bg-blue-500/30":"bg-blue-100 text-blue-600 hover:bg-blue-200"),title:"Reprogramar",children:(0,t.jsx)(d.Clock,{className:"w-4 h-4"})})]})})]},a._id)),0===U.length&&!y&&(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:4,className:"px-6 py-8 text-center text-gray-500",children:"No tienes datos asignados para hoy."})})]})]})})}),N&&S&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:(0,t.jsxs)("div",{className:(0,u.cn)("w-full max-w-md rounded-2xl border p-6 shadow-xl animate-scale-in","dark"===e?"bg-[#1a1b26] border-white/10":"bg-white border-gray-200"),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("h3",{className:(0,u.cn)("text-lg font-semibold flex items-center gap-2","dark"===e?"text-white":"text-gray-800"),children:[(0,t.jsx)(n.MessageCircle,{className:"w-5 h-5 text-green-500"}),"Enviar WhatsApp"]}),(0,t.jsx)("button",{onClick:()=>C(!1),className:"text-gray-500 hover:text-gray-700",children:(0,t.jsx)(x.X,{className:"w-5 h-5"})})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("p",{className:(0,u.cn)("text-sm mb-2","dark"===e?"text-gray-400":"text-gray-600"),children:["Para: ",(0,t.jsx)("span",{className:"font-medium text-green-500",children:S.affiliate.nombre})," (",S.affiliate.telefono1,")"]}),(0,t.jsx)("textarea",{value:M,onChange:e=>A(e.target.value),rows:4,className:(0,u.cn)("w-full p-3 rounded-xl border text-sm resize-none focus:ring-2 focus:ring-green-500/50 outline-none","dark"===e?"bg-white/5 border-white/10 text-white":"bg-gray-50 border-gray-200 text-gray-800"),placeholder:"Escribe tu mensaje aquí..."})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,t.jsx)("button",{onClick:()=>C(!1),className:(0,u.cn)("px-4 py-2 rounded-lg text-sm font-medium transition-colors","dark"===e?"hover:bg-white/10 text-gray-300":"hover:bg-gray-100 text-gray-600"),children:"Cancelar"}),(0,t.jsx)("button",{onClick:H,disabled:F||!M.trim(),className:(0,u.cn)("flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors","bg-green-500 text-white hover:bg-green-600 disabled:opacity-50 disabled:cursor-not-allowed"),children:F?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Enviando..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.Send,{className:"w-4 h-4"}),"Enviar Mensaje"]})})]})]})}),z&&S&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:(0,t.jsxs)("div",{className:(0,u.cn)("w-full max-w-md rounded-2xl border p-6 shadow-xl animate-scale-in","dark"===e?"bg-[#1a1b26] border-white/10":"bg-white border-gray-200"),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("h3",{className:(0,u.cn)("text-lg font-semibold flex items-center gap-2","dark"===e?"text-white":"text-gray-800"),children:[(0,t.jsx)(g.Calendar,{className:"w-5 h-5 text-blue-500"}),"Reprogramar Llamada"]}),(0,t.jsx)("button",{onClick:()=>P(!1),className:"text-gray-500 hover:text-gray-700",children:(0,t.jsx)(x.X,{className:"w-5 h-5"})})]}),(0,t.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:(0,u.cn)("text-xs mb-1 block","dark"===e?"text-gray-400":"text-gray-500"),children:"Fecha y Hora"}),(0,t.jsx)("input",{type:"datetime-local",value:q,onChange:e=>L(e.target.value),className:(0,u.cn)("w-full p-3 rounded-xl border text-sm focus:ring-2 focus:ring-blue-500/50 outline-none","dark"===e?"bg-white/5 border-white/10 text-white":"bg-gray-50 border-gray-200 text-gray-800")})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:(0,u.cn)("text-xs mb-1 block","dark"===e?"text-gray-400":"text-gray-500"),children:"Nota (Opcional)"}),(0,t.jsx)("textarea",{value:T,onChange:e=>I(e.target.value),rows:3,className:(0,u.cn)("w-full p-3 rounded-xl border text-sm resize-none focus:ring-2 focus:ring-blue-500/50 outline-none","dark"===e?"bg-white/5 border-white/10 text-white":"bg-gray-50 border-gray-200 text-gray-800"),placeholder:"Motivo de reprogramación..."})]})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,t.jsx)("button",{onClick:()=>P(!1),className:(0,u.cn)("px-4 py-2 rounded-lg text-sm font-medium transition-colors","dark"===e?"hover:bg-white/10 text-gray-300":"hover:bg-gray-100 text-gray-600"),children:"Cancelar"}),(0,t.jsx)("button",{onClick:G,disabled:O||!q,className:(0,u.cn)("flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors","bg-blue-500 text-white hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed"),children:O?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Guardando..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.CheckCircle,{className:"w-4 h-4"}),"Confirmar"]})})]})]})})]})}e.s(["ContactarDatosDia",()=>y])},93894,e=>{"use strict";var t=e.i(13161),a=e.i(55387);function r(){return(0,t.jsx)(a.DashboardContent,{activeSection:"base-afiliados-cargar"})}e.s(["default",()=>r])}]);