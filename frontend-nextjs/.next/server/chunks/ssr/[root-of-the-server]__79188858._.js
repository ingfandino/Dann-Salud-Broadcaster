module.exports=[14747,(a,b,c)=>{b.exports=a.x("path",()=>require("path"))},41221,a=>{"use strict";let b=(0,a.i(3446).default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);a.s(["RefreshCw",()=>b],41221)},39886,a=>{"use strict";let b=(0,a.i(3446).default)("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);a.s(["Smartphone",()=>b],39886)},42095,a=>{"use strict";let b=(0,a.i(3446).default)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);a.s(["CheckCircle2",()=>b],42095)},60799,a=>{"use strict";let b=(0,a.i(3446).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],60799)},88546,a=>{"use strict";var b=a.i(47753),c=a.i(5504),d=a.i(3446);let e=(0,d.default)("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);var f=a.i(41221),g=a.i(39886);let h=(0,d.default)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var i=a.i(42095),j=a.i(60799),k=a.i(19596),l=a.i(86326),m=a.i(37627),n=a.i(21410),o=a.i(79771);function p(){let{theme:a}=(0,k.useTheme)(),d=(0,o.useRouter)(),[p,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)(null),[t,u]=(0,c.useState)(!1),[v,w]=(0,c.useState)(!0),[x,y]=(0,c.useState)(null),z=(0,c.useRef)(!1),A=(0,c.useCallback)(async()=>{try{y(null);let a=await m.api.whatsapp.status();if(a.data?.connected){if(!z.current){z.current=!0,u(!0),s(null),w(!1),n.toast.success("ðŸŽ‰ Â¡WhatsApp vinculado exitosamente!"),setTimeout(()=>{d.push("/dashboard/contact/today")},2e3);return}u(!0),s(null),w(!1);return}z.current=!1,u(!1);let b=await m.api.whatsapp.qr();b.data?.qr?s(b.data.qr):b.data?.initializing&&y("Inicializando conexiÃ³n..."),w(!1)}catch(a){console.error("Error obteniendo QR:",a),y("Error al obtener QR"),w(!1)}},[d]);(0,c.useEffect)(()=>{A();let a=setInterval(A,5e3);return()=>clearInterval(a)},[A]);let B=async()=>{q(!0);try{await m.api.whatsapp.relink(),n.toast.success("Generando nuevo QR..."),await A()}catch(a){n.toast.error("Error al refrescar QR")}finally{q(!1)}};return(0,b.jsx)("div",{className:"animate-fade-in-up flex items-center justify-center min-h-[60vh]",children:(0,b.jsxs)("div",{className:(0,l.cn)("w-full max-w-md rounded-2xl border p-6 lg:p-8 backdrop-blur-sm text-center","dark"===a?"bg-gradient-to-br from-white/10 to-white/5 border-white/10 shadow-2xl shadow-purple-500/10":"bg-gradient-to-br from-white to-[#FAF7F2]/80 border-purple-200/30 shadow-xl shadow-purple-200/30"),children:[(0,b.jsxs)("div",{className:"flex items-center justify-center gap-3 mb-2",children:[(0,b.jsx)("div",{className:(0,l.cn)("p-2.5 rounded-xl","dark"===a?"bg-gradient-to-br from-purple-500/20 to-blue-500/20":"bg-gradient-to-br from-purple-100 to-blue-100"),children:(0,b.jsx)(e,{className:(0,l.cn)("w-6 h-6","dark"===a?"text-purple-400":"text-purple-600")})}),(0,b.jsx)("h2",{className:(0,l.cn)("text-xl lg:text-2xl font-bold","dark"===a?"text-white":"text-gray-800"),children:"Vincular WhatsApp"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-6",children:[(0,b.jsx)(g.Smartphone,{className:(0,l.cn)("w-4 h-4","dark"===a?"text-gray-400":"text-gray-500")}),(0,b.jsx)("p",{className:(0,l.cn)("text-sm","dark"===a?"text-gray-400":"text-gray-600"),children:t?"WhatsApp vinculado correctamente":"Escanea este QR con WhatsApp"})]}),(0,b.jsxs)("div",{className:(0,l.cn)("relative mx-auto w-56 h-56 lg:w-64 lg:h-64 rounded-xl p-4 mb-6 overflow-hidden flex items-center justify-center","dark"===a?"bg-white":"bg-white border border-purple-100 shadow-inner"),children:[v&&(0,b.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,b.jsx)(j.Loader2,{className:"w-12 h-12 text-emerald-500 animate-spin"}),(0,b.jsx)("span",{className:"text-sm text-gray-500",children:"Cargando..."})]}),!v&&t&&(0,b.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,b.jsx)("div",{className:"w-20 h-20 rounded-full bg-emerald-100 flex items-center justify-center",children:(0,b.jsx)(i.CheckCircle2,{className:"w-12 h-12 text-emerald-500"})}),(0,b.jsx)("span",{className:"text-sm font-medium text-emerald-600",children:"Â¡Conectado!"})]}),!v&&!t&&r&&(0,b.jsx)("img",{src:r,alt:"QR Code WhatsApp",className:"w-full h-full object-contain"}),!v&&!t&&!r&&(0,b.jsxs)("div",{className:"flex flex-col items-center gap-3 text-center px-4",children:[(0,b.jsx)(j.Loader2,{className:"w-10 h-10 text-gray-400 animate-spin"}),(0,b.jsx)("span",{className:"text-xs text-gray-500",children:x||"Esperando cÃ³digo QR..."})]}),p&&(0,b.jsx)("div",{className:"absolute inset-0 bg-white/90 flex items-center justify-center",children:(0,b.jsx)(f.RefreshCw,{className:"w-8 h-8 text-emerald-500 animate-spin"})})]}),(0,b.jsxs)("button",{onClick:B,disabled:p,className:(0,l.cn)("w-full flex items-center justify-center gap-2 px-4 py-3 rounded-xl text-sm font-semibold transition-all transform hover:scale-[1.02] active:scale-[0.98]","dark"===a?"bg-gradient-to-r from-[#17C787] to-emerald-600 hover:from-[#17C787]/90 hover:to-emerald-600/90 text-white shadow-lg shadow-[#17C787]/20":"bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-600 hover:to-emerald-700 text-white shadow-lg shadow-emerald-200/50",p&&"opacity-70 cursor-not-allowed"),children:[(0,b.jsx)(f.RefreshCw,{className:(0,l.cn)("w-4 h-4",p&&"animate-spin")}),p?"Actualizando...":"Refrescar QR"]}),(0,b.jsx)("div",{className:(0,l.cn)("mt-6 pt-4 border-t","dark"===a?"border-white/10":"border-purple-100"),children:(0,b.jsxs)("div",{className:(0,l.cn)("flex items-center justify-center gap-2 text-xs flex-wrap","dark"===a?"text-gray-400":"text-gray-500"),children:[(0,b.jsx)("span",{children:"Abre WhatsApp"}),(0,b.jsx)(h,{className:"w-3 h-3"}),(0,b.jsx)("span",{children:"MenÃº de dispositivos vinculados"}),(0,b.jsx)(h,{className:"w-3 h-3"}),(0,b.jsx)("span",{children:"Escanea el cÃ³digo QR"})]})})]})})}function q(){return(0,b.jsx)(p,{})}a.s(["default",()=>q],88546)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__79188858._.js.map