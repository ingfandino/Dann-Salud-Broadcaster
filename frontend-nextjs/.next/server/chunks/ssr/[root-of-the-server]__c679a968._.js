module.exports=[14747,(a,b,c)=>{b.exports=a.x("path",()=>require("path"))},83901,a=>{"use strict";let b=(0,a.i(3446).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);a.s(["Trash2",()=>b],83901)},82812,a=>{"use strict";let b=(0,a.i(3446).default)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);a.s(["Settings",()=>b],82812)},49731,a=>{"use strict";let b=(0,a.i(3446).default)("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);a.s(["Package",()=>b],49731)},48586,a=>{"use strict";let b=(0,a.i(3446).default)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);a.s(["Save",()=>b],48586)},97344,a=>{"use strict";var b=a.i(47753),c=a.i(82812),d=a.i(33577),e=a.i(49731),f=a.i(804),g=a.i(83901),h=a.i(48586),i=a.i(19596),j=a.i(86326),k=a.i(5504),l=a.i(37627),m=a.i(21410),n=a.i(40197);function o(){let{theme:a}=(0,i.useTheme)(),{user:o}=(0,n.useAuth)(),[p,q]=(0,k.useState)(!1),[r,s]=(0,k.useState)([]),[t,u]=(0,k.useState)([]);(0,k.useEffect)(()=>{let a=async()=>{try{let a=(await l.api.users.list()).data,b=[];o?.role==="gerencia"||o?.role==="admin"?b=a.filter(a=>!0===a.active&&("asesor"===a.role||"auditor"===a.role&&a.numeroEquipo)):o?.role==="supervisor"&&(b=a.filter(a=>!0===a.active&&(("asesor"===a.role||"auditor"===a.role)&&a.numeroEquipo===o.numeroEquipo||a._id===o._id))),b.sort((a,b)=>{let c=a.numeroEquipo?parseInt(a.numeroEquipo):999999,d=b.numeroEquipo?parseInt(b.numeroEquipo):999999;return c!==d?c-d:a.nombre.localeCompare(b.nombre)}),s(b)}catch(a){console.error("Error cargando usuarios:",a),m.toast.error("Error al cargar lista de asesores")}};o&&a()},[o]);let v=(a,b,c)=>{u(t.map(d=>d.id!==a?d:"freshPercentage"===b?{...d,mix:{freshPercentage:Number(c),reusablePercentage:100-Number(c)}}:{...d,[b]:c}))},[w,x]=(0,k.useState)(null),y=async()=>{if(0===t.length)return void m.toast.error("Agrega al menos un asesor para distribuir");if(t.find(a=>!a.asesorId||a.quantity<=0))return void m.toast.error("Completa todos los campos de asesor y cantidad");if(o?.role==="supervisor"&&w){let a=w.freshCount+w.reusableCount,b=0,c=0;for(let a of t){let d=a.mix.freshPercentage/100,e=a.mix.reusablePercentage/100;b+=Math.floor(a.quantity*d),c+=Math.ceil(a.quantity*e)}let d=t.reduce((a,b)=>a+b.quantity,0);if(d>a)return void m.toast.error(`No puedes enviar ${d} datos. Solo tienes ${a} disponibles.`);if(b>w.freshCount)return void m.toast.error(`No hay suficientes datos frescos. Solicitados: ${b}, Disponibles: ${w.freshCount}`);if(c>w.reusableCount)return void m.toast.error(`No hay suficientes datos reutilizables. Solicitados: ${c}, Disponibles: ${w.reusableCount}`)}q(!0);try{let a={distribution:t.map(({asesorId:a,quantity:b,mix:c})=>({asesorId:a,quantity:Number(b),mix:c}))};if(await l.api.assignments.distribute(a),m.toast.success("Distribución completada exitosamente"),u([]),o?.role==="supervisor"){let a=await l.api.affiliates.getSupervisorStats();x(a.data)}}catch(a){console.error("Error distribuyendo:",a),m.toast.error("Error al realizar la distribución")}finally{q(!1)}};return(0,k.useEffect)(()=>{o?.role==="supervisor"&&(async()=>{try{let a=await l.api.affiliates.getSupervisorStats();x(a.data)}catch(a){console.error("Error fetching supervisor stats:",a)}})()},[o]),(0,b.jsxs)("div",{className:"animate-fade-in-up space-y-4",children:[(0,b.jsxs)("div",{className:(0,j.cn)("rounded-2xl border p-4 lg:p-6 backdrop-blur-sm","dark"===a?"bg-gradient-to-br from-white/5 to-white/[0.02] border-white/10":"bg-gradient-to-br from-white to-[#FAF7F2]/80 border-purple-200/30 shadow-lg shadow-purple-100/30"),children:[(0,b.jsxs)("h2",{className:(0,j.cn)("text-lg lg:text-xl font-semibold flex items-center gap-2","dark"===a?"text-white":"text-gray-700"),children:[(0,b.jsx)(c.Settings,{className:(0,j.cn)("w-5 h-5","dark"===a?"text-purple-400":"text-purple-500")}),"Administración de Datos"]}),(0,b.jsx)("p",{className:(0,j.cn)("text-sm mt-2","dark"===a?"text-gray-400":"text-gray-600"),children:"Configura la distribución digital de afiliados a los asesores."})]}),o?.role==="supervisor"&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:(0,j.cn)("rounded-2xl border p-6 backdrop-blur-sm","dark"===a?"bg-gradient-to-br from-white/5 to-white/[0.02] border-white/10":"bg-gradient-to-br from-white to-[#FAF7F2]/80 border-purple-200/30 shadow-lg shadow-purple-100/30"),children:[(0,b.jsx)("h2",{className:(0,j.cn)("text-xl font-semibold flex items-center gap-2 mb-6","dark"===a?"text-white":"text-gray-800"),children:"Disponibilidad de Datos"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:(0,j.cn)("p-6 rounded-2xl border transition-all duration-300","dark"===a?"bg-emerald-500/10 border-emerald-500/20 hover:bg-emerald-500/20":"bg-emerald-50 border-emerald-200 hover:bg-emerald-100"),children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("span",{className:(0,j.cn)("text-sm font-medium","dark"===a?"text-emerald-300":"text-emerald-700"),children:"Datos Frescos"}),(0,b.jsx)("div",{className:(0,j.cn)("p-2 rounded-lg","dark"===a?"bg-emerald-500/20":"bg-emerald-200"),children:(0,b.jsx)(d.Users,{className:(0,j.cn)("w-5 h-5","dark"===a?"text-emerald-400":"text-emerald-600")})})]}),(0,b.jsx)("div",{className:(0,j.cn)("text-3xl font-bold","dark"===a?"text-white":"text-gray-900"),children:w?.freshCount||0}),(0,b.jsx)("p",{className:(0,j.cn)("text-xs mt-2","dark"===a?"text-gray-400":"text-gray-500"),children:"Disponibles para asignar"})]}),(0,b.jsxs)("div",{className:(0,j.cn)("p-6 rounded-2xl border transition-all duration-300","dark"===a?"bg-blue-500/10 border-blue-500/20 hover:bg-blue-500/20":"bg-blue-50 border-blue-200 hover:bg-blue-100"),children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("span",{className:(0,j.cn)("text-sm font-medium","dark"===a?"text-blue-300":"text-blue-700"),children:"Datos Reutilizables"}),(0,b.jsx)("div",{className:(0,j.cn)("p-2 rounded-lg","dark"===a?"bg-blue-500/20":"bg-blue-200"),children:(0,b.jsx)(e.Package,{className:(0,j.cn)("w-5 h-5","dark"===a?"text-blue-400":"text-blue-600")})})]}),(0,b.jsx)("div",{className:(0,j.cn)("text-3xl font-bold","dark"===a?"text-white":"text-gray-900"),children:w?.reusableCount||0}),(0,b.jsx)("p",{className:(0,j.cn)("text-xs mt-2","dark"===a?"text-gray-400":"text-gray-500"),children:"Disponibles para re-asignar"})]})]})]}),(0,b.jsxs)("div",{className:(0,j.cn)("rounded-2xl border p-6 backdrop-blur-sm","dark"===a?"bg-gradient-to-br from-white/5 to-white/[0.02] border-white/10":"bg-gradient-to-br from-white to-[#FAF7F2]/80 border-purple-200/30 shadow-lg shadow-purple-100/30"),children:[(0,b.jsx)("h3",{className:(0,j.cn)("text-lg font-semibold mb-4","dark"===a?"text-white":"text-gray-800"),children:"Detalle por Obra Social"}),w?.byObraSocial&&w.byObraSocial.length>0?(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:w.byObraSocial.map((c,d)=>(0,b.jsxs)("div",{className:(0,j.cn)("flex items-center justify-between p-3 rounded-xl border","dark"===a?"bg-white/5 border-white/10":"bg-white border-gray-100"),children:[(0,b.jsx)("span",{className:(0,j.cn)("text-sm font-medium truncate flex-1","dark"===a?"text-gray-300":"text-gray-700"),children:c.obraSocial||"Sin especificar"}),(0,b.jsx)("span",{className:(0,j.cn)("text-sm font-bold px-2 py-1 rounded-lg ml-2","dark"===a?"bg-purple-500/20 text-purple-300":"bg-purple-100 text-purple-700"),children:c.count})]},d))}):(0,b.jsx)("div",{className:(0,j.cn)("text-center py-8 text-sm","dark"===a?"text-gray-500":"text-gray-400"),children:"No hay datos disponibles"})]})]}),(0,b.jsxs)("div",{className:(0,j.cn)("rounded-2xl border p-4 lg:p-6 backdrop-blur-sm","dark"===a?"bg-gradient-to-br from-white/5 to-white/[0.02] border-white/10":"bg-gradient-to-br from-white to-[#FAF7F2]/80 border-purple-200/30 shadow-lg shadow-purple-100/30"),children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsxs)("h3",{className:(0,j.cn)("font-semibold flex items-center gap-2","dark"===a?"text-orange-400":"text-orange-500"),children:[(0,b.jsx)(e.Package,{className:"w-4 h-4"}),"Configuración de Distribución"]}),(0,b.jsxs)("button",{onClick:()=>{u([...t,{id:Math.random().toString(36).substr(2,9),asesorId:"",quantity:50,mix:{freshPercentage:50,reusablePercentage:50}}])},className:(0,j.cn)("flex items-center gap-1 px-3 py-1.5 rounded-lg text-sm font-medium transition-colors","dark"===a?"bg-green-500/20 text-green-400 hover:bg-green-500/30":"bg-green-100 text-green-600 hover:bg-green-200"),children:[(0,b.jsx)(f.Plus,{className:"w-4 h-4"}),"Agregar Asesor"]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[0===t.length&&(0,b.jsx)("div",{className:(0,j.cn)("text-center py-8 text-sm","dark"===a?"text-gray-500":"text-gray-400"),children:'No hay configuraciones. Haz clic en "Agregar Asesor" para comenzar.'}),t.map((c,d)=>(0,b.jsxs)("div",{className:(0,j.cn)("rounded-xl border p-4 transition-all","dark"===a?"border-white/10 bg-white/5":"border-gray-200 bg-gray-50"),children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsxs)("span",{className:(0,j.cn)("font-medium text-sm","dark"===a?"text-white":"text-gray-700"),children:["Asignación #",d+1]}),(0,b.jsx)("button",{onClick:()=>{var a;return a=c.id,void u(t.filter(b=>b.id!==a))},className:"text-red-400 hover:text-red-500 transition-colors",children:(0,b.jsx)(g.Trash2,{className:"w-4 h-4"})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-3 items-end",children:[(0,b.jsxs)("div",{className:"lg:col-span-4",children:[(0,b.jsx)("label",{className:(0,j.cn)("text-xs mb-1 block","dark"===a?"text-gray-400":"text-gray-500"),children:"Asesor"}),(0,b.jsxs)("select",{value:c.asesorId,onChange:a=>v(c.id,"asesorId",a.target.value),className:(0,j.cn)("w-full px-3 py-2 rounded-lg border text-sm","dark"===a?"bg-white/5 border-white/10 text-white":"bg-white border-gray-200 text-gray-700"),children:[(0,b.jsx)("option",{value:"",children:"-- Seleccione --"}),r.map(a=>(0,b.jsxs)("option",{value:a._id,children:[a.nombre," ",a.numeroEquipo?`(Eq: ${a.numeroEquipo})`:""]},a._id))]})]}),(0,b.jsxs)("div",{className:"lg:col-span-2",children:[(0,b.jsx)("label",{className:(0,j.cn)("text-xs mb-1 block","dark"===a?"text-gray-400":"text-gray-500"),children:"Cantidad"}),(0,b.jsx)("input",{type:"number",value:c.quantity,onChange:a=>v(c.id,"quantity",a.target.value),className:(0,j.cn)("w-full px-3 py-2 rounded-lg border text-sm","dark"===a?"bg-white/5 border-white/10 text-white":"bg-white border-gray-200 text-gray-700")})]}),(0,b.jsxs)("div",{className:"lg:col-span-6",children:[(0,b.jsxs)("label",{className:(0,j.cn)("text-xs mb-1 block flex justify-between","dark"===a?"text-gray-400":"text-gray-500"),children:[(0,b.jsxs)("span",{children:["Mezcla: ",c.mix.freshPercentage,"% Frescos"]}),(0,b.jsxs)("span",{children:[c.mix.reusablePercentage,"% Reutilizables"]})]}),(0,b.jsx)("input",{type:"range",min:"0",max:"100",step:"10",value:c.mix.freshPercentage,onChange:a=>v(c.id,"freshPercentage",a.target.value),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700"})]})]})]},c.id))]})]}),(0,b.jsx)("button",{onClick:y,disabled:p||0===t.length,className:(0,j.cn)("flex items-center gap-2 px-6 py-3 rounded-xl font-semibold transition-all duration-200 hover:scale-105 disabled:opacity-50 disabled:hover:scale-100","dark"===a?"bg-gradient-to-r from-blue-600 to-blue-500 text-white hover:from-blue-500 hover:to-blue-400":"bg-gradient-to-r from-blue-500 to-blue-400 text-white hover:from-blue-400 hover:to-blue-300"),children:p?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Procesando..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h.Save,{className:"w-4 h-4"}),"Ejecutar Distribución"]})})]})}a.s(["ContactarAdministracion",()=>o])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__c679a968._.js.map