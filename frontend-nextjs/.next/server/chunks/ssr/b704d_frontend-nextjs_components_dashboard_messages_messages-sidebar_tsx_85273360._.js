module.exports=[72918,27584,22630,42568,a=>{"use strict";let b,c,d,e,f;var g=a.i(47753),h=a.i(5504);function i(a,b){if("function"==typeof a)return a(b);null!=a&&(a.current=b)}function j(...a){return b=>{let c=!1,d=a.map(a=>{let d=i(a,b);return c||"function"!=typeof d||(c=!0),d});if(c)return()=>{for(let b=0;b<d.length;b++){let c=d[b];"function"==typeof c?c():i(a[b],null)}}}}function k(...a){return h.useCallback(j(...a),a)}var l=Symbol.for("react.lazy"),m=h[" use ".trim().toString()];function n(a){var b;return null!=a&&"object"==typeof a&&"$$typeof"in a&&a.$$typeof===l&&"_payload"in a&&"object"==typeof(b=a._payload)&&null!==b&&"then"in b}var o=((f=h.forwardRef((a,b)=>{let{children:c,...d}=a;if(n(c)&&"function"==typeof m&&(c=m(c._payload)),h.isValidElement(c)){var e;let a,f,g=(e=c,(f=(a=Object.getOwnPropertyDescriptor(e.props,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?e.ref:(f=(a=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?e.props.ref:e.props.ref||e.ref),i=function(a,b){let c={...b};for(let d in b){let e=a[d],f=b[d];/^on[A-Z]/.test(d)?e&&f?c[d]=(...a)=>{let b=f(...a);return e(...a),b}:e&&(c[d]=e):"style"===d?c[d]={...e,...f}:"className"===d&&(c[d]=[e,f].filter(Boolean).join(" "))}return{...a,...c}}(d,c.props);return c.type!==h.Fragment&&(i.ref=b?j(b,g):g),h.cloneElement(c,i)}return h.Children.count(c)>1?h.Children.only(null):null})).displayName="Slot.SlotClone",b=f,(c=h.forwardRef((a,c)=>{let{children:d,...e}=a;n(d)&&"function"==typeof m&&(d=m(d._payload));let f=h.Children.toArray(d),i=f.find(q);if(i){let a=i.props.children,d=f.map(b=>b!==i?b:h.Children.count(a)>1?h.Children.only(null):h.isValidElement(a)?a.props.children:null);return(0,g.jsx)(b,{...e,ref:c,children:h.isValidElement(a)?h.cloneElement(a,void 0,d):null})}return(0,g.jsx)(b,{...e,ref:c,children:d})})).displayName="Slot.Slot",c),p=Symbol("radix.slottable");function q(a){return h.isValidElement(a)&&"function"==typeof a.type&&"__radixId"in a.type&&a.type.__radixId===p}var r=a.i(52339);let s=a=>"boolean"==typeof a?`${a}`:0===a?"0":a,t=r.clsx;var u=a.i(86326);let v=(d="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e={variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}},a=>{var b;if((null==e?void 0:e.variants)==null)return t(d,null==a?void 0:a.class,null==a?void 0:a.className);let{variants:c,defaultVariants:f}=e,g=Object.keys(c).map(b=>{let d=null==a?void 0:a[b],e=null==f?void 0:f[b];if(null===d)return null;let g=s(d)||s(e);return c[b][g]}),h=a&&Object.entries(a).reduce((a,b)=>{let[c,d]=b;return void 0===d||(a[c]=d),a},{});return t(d,g,null==e||null==(b=e.compoundVariants)?void 0:b.reduce((a,b)=>{let{class:c,className:d,...e}=b;return Object.entries(e).every(a=>{let[b,c]=a;return Array.isArray(c)?c.includes({...f,...h}[b]):({...f,...h})[b]===c})?[...a,c,d]:a},[]),null==a?void 0:a.class,null==a?void 0:a.className)});function w({className:a,variant:b,size:c,asChild:d=!1,...e}){return(0,g.jsx)(d?o:"button",{"data-slot":"button",className:(0,u.cn)(v({variant:b,size:c,className:a})),...e})}var x=a.i(3446);let y=(0,x.default)("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);var z=a.i(47337);let A=(0,x.default)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),B=(0,x.default)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var C=a.i(19596);function D({currentView:a,onViewChange:b,onCompose:c,unreadCount:d}){let{theme:e}=(0,C.useTheme)();return(0,g.jsxs)("div",{className:(0,u.cn)("w-64 flex-shrink-0 border-r p-4 flex flex-col gap-4 hidden md:flex","dark"===e?"border-white/10 bg-black/20":"border-gray-200 bg-gray-50/50"),children:[(0,g.jsxs)(w,{onClick:c,className:(0,u.cn)("w-full gap-2 text-white","dark"===e?"bg-purple-600 hover:bg-purple-700":"bg-[#00C794] hover:bg-[#00a87d]"),children:[(0,g.jsx)(B,{className:"w-4 h-4"}),"Redactar"]}),(0,g.jsxs)("nav",{className:"space-y-1",children:[(0,g.jsxs)("button",{onClick:()=>b("inbox"),className:(0,u.cn)("w-full flex items-center justify-between px-3 py-2 rounded-lg text-sm font-medium transition-colors","inbox"===a?"dark"===e?"bg-white/10 text-white":"bg-[#00C794]/10 text-[#00C794]":"dark"===e?"text-gray-400 hover:bg-white/5 hover:text-white":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"),children:[(0,g.jsxs)("div",{className:"flex items-center gap-3",children:[(0,g.jsx)(y,{className:"w-4 h-4"}),"Bandeja de entrada"]}),d>0&&(0,g.jsx)("span",{className:(0,u.cn)("text-white text-xs px-2 py-0.5 rounded-full","dark"===e?"bg-purple-600":"bg-[#00C794]"),children:d})]}),(0,g.jsxs)("button",{onClick:()=>b("sent"),className:(0,u.cn)("w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors","sent"===a?"dark"===e?"bg-white/10 text-white":"bg-[#00C794]/10 text-[#00C794]":"dark"===e?"text-gray-400 hover:bg-white/5 hover:text-white":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"),children:[(0,g.jsx)(z.Send,{className:"w-4 h-4"}),"Enviados"]}),(0,g.jsxs)("button",{onClick:()=>b("starred"),className:(0,u.cn)("w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors","starred"===a?"dark"===e?"bg-white/10 text-white":"bg-[#00C794]/10 text-[#00C794]":"dark"===e?"text-gray-400 hover:bg-white/5 hover:text-white":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"),children:[(0,g.jsx)(A,{className:"w-4 h-4"}),"Destacados"]})]})]})}a.s(["MessagesSidebar",()=>D],72918);let E=(0,x.default)("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);var F=a.i(83901);function G(a,b,{checkForDefaultPrevented:c=!0}={}){return function(d){if(a?.(d),!1===c||!d.defaultPrevented)return b?.(d)}}var H=globalThis?.document?h.useLayoutEffect:()=>{};h[" useEffectEvent ".trim().toString()],h[" useInsertionEffect ".trim().toString()];var I=h[" useInsertionEffect ".trim().toString()]||H;Symbol("RADIX:SYNC_STATE");var J=a=>{var b;let c,d,{present:e,children:f}=a,g=function(a){var b,c;let[d,e]=h.useState(),f=h.useRef(null),g=h.useRef(a),i=h.useRef("none"),[j,k]=(b=a?"mounted":"unmounted",c={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},h.useReducer((a,b)=>c[a][b]??a,b));return h.useEffect(()=>{let a=K(f.current);i.current="mounted"===j?a:"none"},[j]),H(()=>{let b=f.current,c=g.current;if(c!==a){let d=i.current,e=K(b);a?k("MOUNT"):"none"===e||b?.display==="none"?k("UNMOUNT"):c&&d!==e?k("ANIMATION_OUT"):k("UNMOUNT"),g.current=a}},[a,k]),H(()=>{if(d){let a,b=d.ownerDocument.defaultView??window,c=c=>{let e=K(f.current).includes(CSS.escape(c.animationName));if(c.target===d&&e&&(k("ANIMATION_END"),!g.current)){let c=d.style.animationFillMode;d.style.animationFillMode="forwards",a=b.setTimeout(()=>{"forwards"===d.style.animationFillMode&&(d.style.animationFillMode=c)})}},e=a=>{a.target===d&&(i.current=K(f.current))};return d.addEventListener("animationstart",e),d.addEventListener("animationcancel",c),d.addEventListener("animationend",c),()=>{b.clearTimeout(a),d.removeEventListener("animationstart",e),d.removeEventListener("animationcancel",c),d.removeEventListener("animationend",c)}}k("ANIMATION_END")},[d,k]),{isPresent:["mounted","unmountSuspended"].includes(j),ref:h.useCallback(a=>{f.current=a?getComputedStyle(a):null,e(a)},[])}}(e),i="function"==typeof f?f({present:g.isPresent}):h.Children.only(f),j=k(g.ref,(b=i,(d=(c=Object.getOwnPropertyDescriptor(b.props,"ref")?.get)&&"isReactWarning"in c&&c.isReactWarning)?b.ref:(d=(c=Object.getOwnPropertyDescriptor(b,"ref")?.get)&&"isReactWarning"in c&&c.isReactWarning)?b.props.ref:b.props.ref||b.ref));return"function"==typeof f||g.isPresent?h.cloneElement(i,{ref:j}):null};function K(a){return a?.animationName||"none"}J.displayName="Presence";var L=a.i(61527),M=Symbol("radix.slottable");function N(a){return h.isValidElement(a)&&"function"==typeof a.type&&"__radixId"in a.type&&a.type.__radixId===M}var O=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,b)=>{var c,d;let e,f,i,k=(d=c=`Primitive.${b}`,(e=h.forwardRef((a,b)=>{let{children:c,...d}=a;if(h.isValidElement(c)){var e;let a,f,g=(e=c,(f=(a=Object.getOwnPropertyDescriptor(e.props,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?e.ref:(f=(a=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?e.props.ref:e.props.ref||e.ref),i=function(a,b){let c={...b};for(let d in b){let e=a[d],f=b[d];/^on[A-Z]/.test(d)?e&&f?c[d]=(...a)=>{let b=f(...a);return e(...a),b}:e&&(c[d]=e):"style"===d?c[d]={...e,...f}:"className"===d&&(c[d]=[e,f].filter(Boolean).join(" "))}return{...a,...c}}(d,c.props);return c.type!==h.Fragment&&(i.ref=b?j(b,g):g),h.cloneElement(c,i)}return h.Children.count(c)>1?h.Children.only(null):null})).displayName=`${d}.SlotClone`,f=e,(i=h.forwardRef((a,b)=>{let{children:c,...d}=a,e=h.Children.toArray(c),i=e.find(N);if(i){let a=i.props.children,c=e.map(b=>b!==i?b:h.Children.count(a)>1?h.Children.only(null):h.isValidElement(a)?a.props.children:null);return(0,g.jsx)(f,{...d,ref:b,children:h.isValidElement(a)?h.cloneElement(a,void 0,c):null})}return(0,g.jsx)(f,{...d,ref:b,children:c})})).displayName=`${c}.Slot`,i),l=h.forwardRef((a,c)=>{let{asChild:d,...e}=a;return(0,g.jsx)(d?k:b,{...e,ref:c})});return l.displayName=`Primitive.${b}`,{...a,[b]:l}},{}),P="Checkbox",[Q,R]=function(a,b=[]){let c=[],d=()=>{let b=c.map(a=>h.createContext(a));return function(c){let d=c?.[a]||b;return h.useMemo(()=>({[`__scope${a}`]:{...c,[a]:d}}),[c,d])}};return d.scopeName=a,[function(b,d){let e=h.createContext(d),f=c.length;c=[...c,d];let i=b=>{let{scope:c,children:d,...i}=b,j=c?.[a]?.[f]||e,k=h.useMemo(()=>i,Object.values(i));return(0,g.jsx)(j.Provider,{value:k,children:d})};return i.displayName=b+"Provider",[i,function(c,g){let i=g?.[a]?.[f]||e,j=h.useContext(i);if(j)return j;if(void 0!==d)return d;throw Error(`\`${c}\` must be used within \`${b}\``)}]},function(...a){let b=a[0];if(1===a.length)return b;let c=()=>{let c=a.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(a){let d=c.reduce((b,{useScope:c,scopeName:d})=>{let e=c(a)[`__scope${d}`];return{...b,...e}},{});return h.useMemo(()=>({[`__scope${b.scopeName}`]:d}),[d])}};return c.scopeName=b.scopeName,c}(d,...b)]}(P),[S,T]=Q(P);function U(a){let{__scopeCheckbox:b,checked:c,children:d,defaultChecked:e,disabled:f,form:i,name:j,onCheckedChange:k,required:l,value:m="on",internal_do_not_use_render:n}=a,[o,p]=function({prop:a,defaultProp:b,onChange:c=()=>{},caller:d}){let[e,f,g]=function({defaultProp:a,onChange:b}){let[c,d]=h.useState(a),e=h.useRef(c),f=h.useRef(b);return I(()=>{f.current=b},[b]),h.useEffect(()=>{e.current!==c&&(f.current?.(c),e.current=c)},[c,e]),[c,d,f]}({defaultProp:b,onChange:c}),i=void 0!==a,j=i?a:e;{let b=h.useRef(void 0!==a);h.useEffect(()=>{let a=b.current;if(a!==i){let b=i?"controlled":"uncontrolled";console.warn(`${d} is changing from ${a?"controlled":"uncontrolled"} to ${b}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`)}b.current=i},[i,d])}return[j,h.useCallback(b=>{if(i){let c="function"==typeof b?b(a):b;c!==a&&g.current?.(c)}else f(b)},[i,a,f,g])]}({prop:c,defaultProp:e??!1,onChange:k,caller:P}),[q,r]=h.useState(null),[s,t]=h.useState(null),u=h.useRef(!1),v=!q||!!i||!!q.closest("form"),w={checked:o,disabled:f,setChecked:p,control:q,setControl:r,name:j,form:i,value:m,hasConsumerStoppedPropagationRef:u,required:l,defaultChecked:!aa(e)&&e,isFormControl:v,bubbleInput:s,setBubbleInput:t};return(0,g.jsx)(S,{scope:b,...w,children:"function"==typeof n?n(w):d})}var V="CheckboxTrigger",W=h.forwardRef(({__scopeCheckbox:a,onKeyDown:b,onClick:c,...d},e)=>{let{control:f,value:i,disabled:j,checked:l,required:m,setControl:n,setChecked:o,hasConsumerStoppedPropagationRef:p,isFormControl:q,bubbleInput:r}=T(V,a),s=k(e,n),t=h.useRef(l);return h.useEffect(()=>{let a=f?.form;if(a){let b=()=>o(t.current);return a.addEventListener("reset",b),()=>a.removeEventListener("reset",b)}},[f,o]),(0,g.jsx)(O.button,{type:"button",role:"checkbox","aria-checked":aa(l)?"mixed":l,"aria-required":m,"data-state":ab(l),"data-disabled":j?"":void 0,disabled:j,value:i,...d,ref:s,onKeyDown:G(b,a=>{"Enter"===a.key&&a.preventDefault()}),onClick:G(c,a=>{o(a=>!!aa(a)||!a),r&&q&&(p.current=a.isPropagationStopped(),p.current||a.stopPropagation())})})});W.displayName=V;var X=h.forwardRef((a,b)=>{let{__scopeCheckbox:c,name:d,checked:e,defaultChecked:f,required:h,disabled:i,value:j,onCheckedChange:k,form:l,...m}=a;return(0,g.jsx)(U,{__scopeCheckbox:c,checked:e,defaultChecked:f,disabled:i,required:h,onCheckedChange:k,name:d,form:l,value:j,internal_do_not_use_render:({isFormControl:a})=>(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(W,{...m,ref:b,__scopeCheckbox:c}),a&&(0,g.jsx)(_,{__scopeCheckbox:c})]})})});X.displayName=P;var Y="CheckboxIndicator",Z=h.forwardRef((a,b)=>{let{__scopeCheckbox:c,forceMount:d,...e}=a,f=T(Y,c);return(0,g.jsx)(J,{present:d||aa(f.checked)||!0===f.checked,children:(0,g.jsx)(O.span,{"data-state":ab(f.checked),"data-disabled":f.disabled?"":void 0,...e,ref:b,style:{pointerEvents:"none",...a.style}})})});Z.displayName=Y;var $="CheckboxBubbleInput",_=h.forwardRef(({__scopeCheckbox:a,...b},c)=>{let d,{control:e,hasConsumerStoppedPropagationRef:f,checked:i,defaultChecked:j,required:l,disabled:m,name:n,value:o,form:p,bubbleInput:q,setBubbleInput:r}=T($,a),s=k(c,r),t=(d=h.useRef({value:i,previous:i}),h.useMemo(()=>(d.current.value!==i&&(d.current.previous=d.current.value,d.current.value=i),d.current.previous),[i])),u=function(a){let[b,c]=h.useState(void 0);return H(()=>{if(a){c({width:a.offsetWidth,height:a.offsetHeight});let b=new ResizeObserver(b=>{let d,e;if(!Array.isArray(b)||!b.length)return;let f=b[0];if("borderBoxSize"in f){let a=f.borderBoxSize,b=Array.isArray(a)?a[0]:a;d=b.inlineSize,e=b.blockSize}else d=a.offsetWidth,e=a.offsetHeight;c({width:d,height:e})});return b.observe(a,{box:"border-box"}),()=>b.unobserve(a)}c(void 0)},[a]),b}(e);h.useEffect(()=>{if(!q)return;let a=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,b=!f.current;if(t!==i&&a){let c=new Event("click",{bubbles:b});q.indeterminate=aa(i),a.call(q,!aa(i)&&i),q.dispatchEvent(c)}},[q,t,i,f]);let v=h.useRef(!aa(i)&&i);return(0,g.jsx)(O.input,{type:"checkbox","aria-hidden":!0,defaultChecked:j??v.current,required:l,disabled:m,name:n,value:o,form:p,...b,tabIndex:-1,ref:s,style:{...b.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function aa(a){return"indeterminate"===a}function ab(a){return aa(a)?"indeterminate":a?"checked":"unchecked"}_.displayName=$;let ac=(0,x.default)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);function ad({className:a,...b}){return(0,g.jsx)(X,{"data-slot":"checkbox",className:(0,u.cn)("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",a),...b,children:(0,g.jsx)(Z,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:(0,g.jsx)(ac,{className:"size-3.5"})})})}function ae({messages:a,loading:b,view:c,onSelectMessage:d,onToggleStar:e,onDelete:f,selectedIds:h,onToggleSelect:i,onToggleSelectAll:j,onDeleteAll:k,pagination:l,onPageChange:m}){let{theme:n}=(0,C.useTheme)();return b?(0,g.jsx)("div",{className:"p-8 text-center text-gray-500",children:"Cargando mensajes..."}):0===a.length?(0,g.jsx)("div",{className:"p-8 text-center text-gray-500",children:"No hay mensajes"}):(0,g.jsxs)("div",{className:"flex flex-col h-full",children:[(0,g.jsxs)("div",{className:(0,u.cn)("flex items-center justify-between px-4 py-2 border-b","dark"===n?"border-white/10":"border-gray-200"),children:[(0,g.jsxs)("div",{className:"flex items-center gap-4",children:[(0,g.jsx)(ad,{checked:h.length===a.length&&a.length>0,onCheckedChange:j}),h.length>0?(0,g.jsxs)(w,{variant:"ghost",size:"sm",onClick:()=>f(h),className:"text-red-500 hover:text-red-600 hover:bg-red-50",children:[(0,g.jsx)(F.Trash2,{className:"w-4 h-4 mr-2"}),"Eliminar (",h.length,")"]}):(0,g.jsxs)(w,{variant:"ghost",size:"sm",onClick:k,className:"text-red-500 hover:text-red-600 hover:bg-red-50",children:[(0,g.jsx)(F.Trash2,{className:"w-4 h-4 mr-2"}),"Eliminar todo"]})]}),(0,g.jsxs)("div",{className:"text-xs text-gray-500",children:[l.total," mensajes"]})]}),(0,g.jsx)("div",{className:"flex-1 overflow-y-auto",children:a.map(a=>{let b=h.includes(a._id),f="sent"===c||a.read;return(0,g.jsxs)("div",{className:(0,u.cn)("flex items-center gap-4 px-4 py-3 border-b cursor-pointer transition-colors group","dark"===n?"border-white/5 hover:bg-white/5":"border-gray-100 hover:bg-gray-50",b&&("dark"===n?"bg-purple-900/20":"bg-purple-50"),!f&&("dark"===n?"bg-white/5 font-medium":"bg-white font-medium")),onClick:()=>d(a),children:[(0,g.jsx)("div",{onClick:a=>a.stopPropagation(),children:(0,g.jsx)(ad,{checked:b,onCheckedChange:()=>i(a._id)})}),(0,g.jsx)("button",{onClick:b=>e(b,a._id),className:(0,u.cn)("text-gray-400 hover:text-yellow-400 transition-colors",a.starred&&"text-yellow-400"),children:(0,g.jsx)(A,{className:(0,u.cn)("w-4 h-4",a.starred&&"fill-current")})}),(0,g.jsx)("div",{className:(0,u.cn)("w-48 truncate",!f&&"font-bold","dark"===n?"text-gray-200":"text-gray-900"),children:"sent"===c?`Para: ${a.to.nombre}`:a.from.nombre}),(0,g.jsxs)("div",{className:"flex-1 min-w-0 flex items-center gap-2",children:[(0,g.jsx)("span",{className:(0,u.cn)("truncate",!f&&"font-bold","dark"===n?"text-gray-200":"text-gray-900"),children:a.subject}),(0,g.jsxs)("span",{className:(0,u.cn)("truncate text-sm","text-gray-500"),children:["- ",a.content.substring(0,100)]}),a.attachments.length>0&&(0,g.jsx)(E,{className:"w-3 h-3 text-gray-400 flex-shrink-0"})]}),(0,g.jsx)("div",{className:(0,u.cn)("text-xs whitespace-nowrap",f?"text-gray-500":"text-purple-500 font-bold"),children:new Date(a.createdAt).toLocaleDateString()})]},a._id)})}),l.pages>1&&(0,g.jsxs)("div",{className:(0,u.cn)("p-4 border-t flex justify-center gap-2","dark"===n?"border-white/10":"border-gray-200"),children:[(0,g.jsx)(w,{variant:"outline",size:"sm",disabled:1===l.page,onClick:()=>m(l.page-1),children:"Anterior"}),(0,g.jsxs)("span",{className:"flex items-center text-sm text-gray-500",children:["Página ",l.page," de ",l.pages]}),(0,g.jsx)(w,{variant:"outline",size:"sm",disabled:l.page===l.pages,onClick:()=>m(l.page+1),children:"Siguiente"})]})]})}a.s(["MessageList",()=>ae],27584);var af=a.i(70079);let ag=(0,x.default)("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]),ah=(0,x.default)("Forward",[["polyline",{points:"15 17 20 12 15 7",key:"1w3sku"}],["path",{d:"M4 18v-2a4 4 0 0 1 4-4h12",key:"jmiej9"}]]);var ai=a.i(61305),aj=a.i(37627),ak=a.i(21410);function al({message:a,onBack:b,onReply:c,onForward:d,onDelete:e,onToggleStar:f}){let{theme:h}=(0,C.useTheme)(),i=async b=>{try{let c=await aj.api.internalMessages.downloadAttachment(a._id,b._id),d=window.URL.createObjectURL(new Blob([c.data])),e=document.createElement("a");e.href=d,e.setAttribute("download",b.originalName),document.body.appendChild(e),e.click(),e.remove()}catch(a){console.error("Error downloading attachment:",a),ak.toast.error("Error al descargar el archivo")}};return(0,g.jsxs)("div",{className:"flex flex-col h-full",children:[(0,g.jsxs)("div",{className:(0,u.cn)("flex items-center justify-between px-4 py-3 border-b","dark"===h?"border-white/10":"border-gray-200"),children:[(0,g.jsxs)("div",{className:"flex items-center gap-2",children:[(0,g.jsx)(w,{variant:"ghost",size:"icon",onClick:b,children:(0,g.jsx)(af.ArrowLeft,{className:"w-5 h-5"})}),(0,g.jsxs)("div",{className:"flex gap-1",children:[(0,g.jsxs)(w,{variant:"ghost",size:"sm",onClick:c,children:[(0,g.jsx)(ag,{className:"w-4 h-4 mr-2"}),"Responder"]}),(0,g.jsxs)(w,{variant:"ghost",size:"sm",onClick:d,children:[(0,g.jsx)(ah,{className:"w-4 h-4 mr-2"}),"Reenviar"]}),(0,g.jsxs)(w,{variant:"ghost",size:"sm",onClick:e,className:"text-red-500 hover:text-red-600 hover:bg-red-50",children:[(0,g.jsx)(F.Trash2,{className:"w-4 h-4 mr-2"}),"Eliminar"]})]})]}),(0,g.jsx)(w,{variant:"ghost",size:"icon",onClick:f,children:(0,g.jsx)(A,{className:(0,u.cn)("w-5 h-5",a.starred?"fill-yellow-400 text-yellow-400":"text-gray-400")})})]}),(0,g.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[(0,g.jsxs)("div",{className:"space-y-4",children:[(0,g.jsx)("h1",{className:(0,u.cn)("text-2xl font-bold","dark"===h?"text-white":"text-gray-900"),children:a.subject}),(0,g.jsxs)("div",{className:"flex items-start justify-between",children:[(0,g.jsxs)("div",{className:"flex items-center gap-3",children:[(0,g.jsx)("div",{className:(0,u.cn)("w-10 h-10 rounded-full flex items-center justify-center text-white font-bold","dark"===h?"bg-purple-600":"bg-[#00C794]"),children:a.from.nombre.substring(0,2).toUpperCase()}),(0,g.jsxs)("div",{children:[(0,g.jsxs)("div",{className:(0,u.cn)("font-medium","dark"===h?"text-white":"text-gray-900"),children:[a.from.nombre," ",(0,g.jsxs)("span",{className:"text-gray-500 font-normal",children:["<",a.from.email,">"]})]}),(0,g.jsxs)("div",{className:"text-sm text-gray-500",children:["Para: ",a.to.nombre]})]})]}),(0,g.jsx)("div",{className:"text-sm text-gray-500",children:new Date(a.createdAt).toLocaleString()})]})]}),(0,g.jsx)("hr",{className:(0,u.cn)("dark"===h?"border-white/10":"border-gray-200")}),a.isHtml?(0,g.jsx)("div",{className:(0,u.cn)("prose prose-sm max-w-none leading-relaxed","dark"===h?"prose-invert text-gray-200":"text-gray-800"),dangerouslySetInnerHTML:{__html:a.content}}):(0,g.jsx)("div",{className:(0,u.cn)("whitespace-pre-wrap leading-relaxed","dark"===h?"text-gray-200":"text-gray-800"),children:a.content}),a.attachments.length>0&&(0,g.jsxs)("div",{className:"pt-6",children:[(0,g.jsxs)("h3",{className:(0,u.cn)("text-sm font-medium mb-3 flex items-center gap-2","dark"===h?"text-gray-300":"text-gray-700"),children:[(0,g.jsx)(E,{className:"w-4 h-4"}),"Adjuntos (",a.attachments.length,")"]}),(0,g.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:a.attachments.map(a=>(0,g.jsxs)("div",{className:(0,u.cn)("flex items-center justify-between p-3 rounded-lg border","dark"===h?"bg-white/5 border-white/10":"bg-white border-gray-200"),children:[(0,g.jsxs)("div",{className:"flex items-center gap-3 min-w-0",children:[(0,g.jsx)("div",{className:(0,u.cn)("w-8 h-8 rounded flex items-center justify-center flex-shrink-0","dark"===h?"bg-white/10":"bg-gray-100"),children:(0,g.jsx)("span",{className:"text-xs font-bold uppercase",children:a.originalName.split(".").pop()})}),(0,g.jsxs)("div",{className:"min-w-0",children:[(0,g.jsx)("p",{className:(0,u.cn)("text-sm font-medium truncate","dark"===h?"text-gray-200":"text-gray-800"),children:a.originalName}),(0,g.jsxs)("p",{className:"text-xs text-gray-500",children:[(a.size/1024).toFixed(1)," KB"]})]})]}),(0,g.jsx)(w,{variant:"ghost",size:"icon",onClick:()=>i(a),children:(0,g.jsx)(ai.Download,{className:"w-4 h-4"})})]},a._id))})]})]})]})}a.s(["MessageDetail",()=>al],22630);var am=a.i(14828);function an({className:a,type:b,...c}){return(0,g.jsx)("input",{type:b,"data-slot":"input",className:(0,u.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...c})}function ao({className:a,...b}){return(0,g.jsx)("textarea",{"data-slot":"textarea",className:(0,u.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...b})}function ap({isOpen:a,onClose:b,initialData:c,onSent:d}){let{theme:e}=(0,C.useTheme)(),[f,i]=(0,h.useState)("users"),[j,k]=(0,h.useState)([]),[l,m]=(0,h.useState)([]),[n,o]=(0,h.useState)([]),[p,q]=(0,h.useState)(""),[r,s]=(0,h.useState)(c?.subject||""),[t,v]=(0,h.useState)(c?.content||""),[x,y]=(0,h.useState)([]),[A,B]=(0,h.useState)(!1);(0,h.useEffect)(()=>{a&&(D(),c&&(s(c.subject||""),v(c.content||"")))},[a,c]);let D=async(a="")=>{try{let b=await aj.api.internalMessages.getRecipients(a);if(m(b.data),c?.to&&c.to.length>0){let a=b.data.filter(a=>c.to?.includes(a._id));o(b=>{let c=a.filter(a=>!b.find(b=>b._id===a._id));return[...b,...c]})}}catch(a){console.error("Error loading recipients:",a)}},F=async()=>{if("users"===f&&0===n.length)return void ak.toast.error("Seleccione al menos un destinatario");if("roles"===f&&0===j.length)return void ak.toast.error("Seleccione al menos un rol");if(!t.trim())return void ak.toast.error("El mensaje no puede estar vacío");B(!0);try{let a=new FormData;"users"===f?n.forEach(b=>a.append("to[]",b._id)):j.forEach(b=>a.append("roles[]",b)),a.append("subject",r),a.append("content",t),c?.replyTo&&a.append("replyTo",c.replyTo),c?.isForward&&a.append("isForward","true"),x.forEach(b=>{a.append("attachments",b)}),await aj.api.internalMessages.send(a),ak.toast.success("Mensaje enviado"),d(),b()}catch(a){console.error("Error sending message:",a),ak.toast.error("Error al enviar el mensaje")}finally{B(!1)}},G=a=>{o(b=>b.find(b=>b._id===a._id)?b.filter(b=>b._id!==a._id):[...b,a])};return a?(0,L.createPortal)((0,g.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:(0,g.jsxs)("div",{className:(0,u.cn)("w-full max-w-2xl h-[80vh] flex flex-col rounded-xl shadow-2xl overflow-hidden","dark"===e?"bg-[#1a1333] border border-white/10":"bg-white"),children:[(0,g.jsxs)("div",{className:(0,u.cn)("flex items-center justify-between px-6 py-4 border-b","dark"===e?"border-white/10":"border-gray-100"),children:[(0,g.jsx)("h2",{className:(0,u.cn)("text-lg font-semibold","dark"===e?"text-white":"text-gray-900"),children:"Nuevo Mensaje"}),(0,g.jsx)("button",{onClick:b,className:(0,u.cn)("p-2 rounded-lg transition-colors","dark"===e?"hover:bg-white/10 text-gray-400":"hover:bg-gray-100 text-gray-500"),children:(0,g.jsx)(am.X,{className:"w-5 h-5"})})]}),(0,g.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[(0,g.jsxs)("div",{className:"flex gap-4 mb-2",children:[(0,g.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,g.jsx)("input",{type:"radio",name:"sendMode",checked:"users"===f,onChange:()=>i("users"),className:(0,u.cn)("focus:ring-2","dark"===e?"text-purple-600 focus:ring-purple-500":"text-[#00C794] focus:ring-[#00C794]")}),(0,g.jsx)("span",{className:(0,u.cn)("text-sm","dark"===e?"text-gray-300":"text-gray-700"),children:"Usuarios"})]}),(0,g.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,g.jsx)("input",{type:"radio",name:"sendMode",checked:"roles"===f,onChange:()=>i("roles"),className:(0,u.cn)("focus:ring-2","dark"===e?"text-purple-600 focus:ring-purple-500":"text-[#00C794] focus:ring-[#00C794]")}),(0,g.jsx)("span",{className:(0,u.cn)("text-sm","dark"===e?"text-gray-300":"text-gray-700"),children:"Roles (Grupos)"})]})]}),(0,g.jsxs)("div",{className:"space-y-2",children:[(0,g.jsx)("label",{className:(0,u.cn)("text-sm font-medium","dark"===e?"text-gray-300":"text-gray-700"),children:"Para:"}),"users"===f?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{className:(0,u.cn)("flex flex-wrap gap-2 p-2 rounded-lg border min-h-[42px]","dark"===e?"bg-white/5 border-white/10":"bg-white border-gray-200"),children:[n.map(a=>(0,g.jsxs)("span",{className:(0,u.cn)("text-xs px-2 py-1 rounded-full flex items-center gap-1","dark"===e?"bg-purple-500/20 text-purple-300":"bg-[#00C794]/20 text-[#0078A0]"),children:[a.nombre,(0,g.jsx)("button",{onClick:()=>G(a),className:"hover:text-red-500",children:(0,g.jsx)(am.X,{className:"w-3 h-3"})})]},a._id)),(0,g.jsx)("input",{type:"text",placeholder:"Buscar destinatario...",className:"bg-transparent border-none outline-none text-sm flex-1 min-w-[150px]",value:p,onChange:a=>{q(a.target.value),D(a.target.value)}})]}),p&&(0,g.jsx)("div",{className:(0,u.cn)("max-h-40 overflow-y-auto border rounded-lg","dark"===e?"bg-[#1a1333] border-white/10":"bg-white border-gray-200"),children:l.filter(a=>!n.find(b=>b._id===a._id)).map(a=>(0,g.jsxs)("div",{className:(0,u.cn)("px-3 py-2 cursor-pointer text-sm flex items-center justify-between","dark"===e?"hover:bg-white/5 text-gray-300":"hover:bg-gray-50 text-gray-700"),onClick:()=>{G(a),q("")},children:[(0,g.jsx)("span",{children:a.nombre}),(0,g.jsx)("span",{className:"text-xs opacity-50",children:a.role})]},a._id))})]}):(0,g.jsx)("div",{className:"flex flex-wrap gap-2",children:[{id:"admin",label:"Administrador"},{id:"gerencia",label:"Gerencia"},{id:"supervisor",label:"Supervisor"},{id:"asesor",label:"Asesor"},{id:"auditor",label:"Auditor"},{id:"rr.hh",label:"RR.HH"},{id:"administrativo",label:"Administrativo"}].map(a=>(0,g.jsx)("button",{onClick:()=>{var b;return b=a.id,void k(a=>a.includes(b)?a.filter(a=>a!==b):[...a,b])},className:(0,u.cn)("px-3 py-1.5 rounded-lg text-sm border transition-colors",j.includes(a.id)?"dark"===e?"bg-purple-600 text-white border-purple-600":"bg-[#00C794] text-white border-[#00C794]":"dark"===e?"bg-white/5 border-white/10 text-gray-300 hover:bg-white/10":"bg-white border-gray-200 text-gray-700 hover:bg-gray-50"),children:a.label},a.id))})]}),(0,g.jsxs)("div",{className:"space-y-2",children:[(0,g.jsx)("label",{className:(0,u.cn)("text-sm font-medium","dark"===e?"text-gray-300":"text-gray-700"),children:"Asunto:"}),(0,g.jsx)(an,{value:r,onChange:a=>s(a.target.value),placeholder:"Asunto del mensaje",className:(0,u.cn)("dark"===e?"bg-white/5 border-white/10":"bg-white")})]}),(0,g.jsxs)("div",{className:"space-y-2 flex-1 flex flex-col",children:[(0,g.jsx)("label",{className:(0,u.cn)("text-sm font-medium","dark"===e?"text-gray-300":"text-gray-700"),children:"Mensaje:"}),(0,g.jsx)(ao,{value:t,onChange:a=>v(a.target.value),placeholder:"Escribe tu mensaje aquí...",className:(0,u.cn)("flex-1 min-h-[200px] resize-none","dark"===e?"bg-white/5 border-white/10":"bg-white")})]}),x.length>0&&(0,g.jsx)("div",{className:"flex flex-wrap gap-2",children:x.map((a,b)=>(0,g.jsxs)("div",{className:(0,u.cn)("flex items-center gap-2 px-3 py-1 rounded-lg text-xs border","dark"===e?"bg-white/5 border-white/10 text-gray-300":"bg-gray-50 border-gray-200 text-gray-700"),children:[(0,g.jsx)(E,{className:"w-3 h-3"}),(0,g.jsx)("span",{className:"max-w-[150px] truncate",children:a.name}),(0,g.jsx)("button",{onClick:()=>{y(a=>a.filter((a,c)=>c!==b))},className:"hover:text-red-500",children:(0,g.jsx)(am.X,{className:"w-3 h-3"})})]},b))})]}),(0,g.jsxs)("div",{className:(0,u.cn)("px-6 py-4 border-t flex items-center justify-between","dark"===e?"border-white/10":"border-gray-100"),children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("input",{type:"file",id:"attachments",multiple:!0,className:"hidden",onChange:a=>{a.target.files&&y(b=>[...b,...Array.from(a.target.files)])}}),(0,g.jsxs)("label",{htmlFor:"attachments",className:(0,u.cn)("flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium cursor-pointer transition-colors","dark"===e?"hover:bg-white/10 text-gray-400":"hover:bg-gray-100 text-gray-600"),children:[(0,g.jsx)(E,{className:"w-4 h-4"}),"Adjuntar archivo"]})]}),(0,g.jsxs)("div",{className:"flex gap-3",children:[(0,g.jsx)(w,{variant:"ghost",onClick:b,children:"Cancelar"}),(0,g.jsxs)(w,{onClick:F,disabled:A,className:(0,u.cn)("text-white gap-2","dark"===e?"bg-purple-600 hover:bg-purple-700":"bg-[#00C794] hover:bg-[#00a87d]"),children:[(0,g.jsx)(z.Send,{className:"w-4 h-4"}),A?"Enviando...":"Enviar"]})]})]})]})}),document.body):null}a.s(["ComposeModal",()=>ap],42568)}];

//# sourceMappingURL=b704d_frontend-nextjs_components_dashboard_messages_messages-sidebar_tsx_85273360._.js.map