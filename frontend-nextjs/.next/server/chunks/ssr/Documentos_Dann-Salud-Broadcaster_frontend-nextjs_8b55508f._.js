module.exports=[78702,a=>{"use strict";let b=(0,a.i(3446).default)("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);a.s(["Table",()=>b],78702)},34692,a=>{"use strict";let b=(0,a.i(3446).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);a.s(["Clock",()=>b],34692)},91368,a=>{"use strict";let b=(0,a.i(3446).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);a.s(["Calendar",()=>b],91368)},84321,a=>{"use strict";var b=a.i(47753),c=a.i(78702),d=a.i(81252),e=a.i(61305),f=a.i(41221),g=a.i(6585),h=a.i(35810),i=a.i(34692),j=a.i(11873),k=a.i(47337),l=a.i(14828),m=a.i(91368),n=a.i(19596),o=a.i(86326),p=a.i(5504),q=a.i(37627),r=a.i(21410);function s(){let{theme:a}=(0,n.useTheme)(),[s,t]=(0,p.useState)(!1),[u,v]=(0,p.useState)([]),[w,x]=(0,p.useState)(""),[y,z]=(0,p.useState)(!1),[A,B]=(0,p.useState)(null),[C,D]=(0,p.useState)(""),[E,F]=(0,p.useState)(!1),[G,H]=(0,p.useState)(!1),[I,J]=(0,p.useState)(""),[K,L]=(0,p.useState)(""),[M,N]=(0,p.useState)(!1),O=async()=>{t(!0);try{let a=await q.api.assignments.getMyLeads();v(a.data)}catch(a){console.error("Error cargando leads:",a),r.toast.error("Error al cargar tus datos del día")}finally{t(!1)}};(0,p.useEffect)(()=>{O()},[]);let P=async(a,b)=>{try{v(u.map(c=>c._id===a?{...c,status:b}:c)),await q.api.assignments.updateStatus(a,{status:b}),r.toast.success(`Estado actualizado a ${b}`)}catch(a){console.error("Error actualizando estado:",a),r.toast.error("Error al actualizar estado"),O()}},Q=async()=>{if(A&&C.trim()){F(!0);try{await q.api.assignments.sendWhatsApp(A._id,{message:C}),r.toast.success("Mensaje enviado correctamente"),z(!1),v(u.map(a=>a._id===A._id?{...a,status:"En Gestión"}:a))}catch(a){console.error("Error enviando WA:",a),r.toast.error(a.response?.data?.error||"Error al enviar mensaje")}finally{F(!1)}}},R=async()=>{if(A&&I){N(!0);try{await q.api.assignments.reschedule(A._id,{date:new Date(I).toISOString(),note:K}),r.toast.success("Reprogramado exitosamente"),H(!1),v(u.map(a=>a._id===A._id?{...a,status:"En Gestión",subStatus:"Reprogramado"}:a))}catch(a){console.error("Error reprogramando:",a),r.toast.error(a.response?.data?.error||"Error al reprogramar")}finally{N(!1)}}},S=u.filter(a=>{let b=w.toLowerCase();return a.affiliate?.nombre?.toLowerCase().includes(b)||a.affiliate?.telefono1?.includes(b)||a.affiliate?.cuil?.includes(b)}),T=async()=>{try{let a=await q.api.assignments.exportMyLeads(),b=window.URL.createObjectURL(new Blob([a.data])),c=document.createElement("a");c.href=b,c.setAttribute("download",`mis_leads_${new Date().toISOString().split("T")[0]}.xlsx`),document.body.appendChild(c),c.click(),c.remove(),r.toast.success("Excel exportado correctamente")}catch(a){console.error("Error exportando:",a),r.toast.error("Error al exportar Excel")}};return(0,b.jsxs)("div",{className:"animate-fade-in-up space-y-4 relative",children:[(0,b.jsxs)("div",{className:(0,o.cn)("rounded-2xl border p-4 lg:p-6 backdrop-blur-sm","dark"===a?"bg-gradient-to-br from-white/5 to-white/[0.02] border-white/10":"bg-gradient-to-br from-white to-[#FAF7F2]/80 border-purple-200/30 shadow-lg shadow-purple-100/30"),children:[(0,b.jsxs)("h2",{className:(0,o.cn)("text-lg lg:text-xl font-semibold flex items-center gap-2","dark"===a?"text-white":"text-gray-700"),children:[(0,b.jsx)(c.Table,{className:(0,o.cn)("w-5 h-5","dark"===a?"text-purple-400":"text-purple-500")}),"Datos del Día"]}),(0,b.jsxs)("p",{className:(0,o.cn)("text-sm mt-2","dark"===a?"text-gray-400":"text-gray-600"),children:["Gestiona tus asignaciones diarias. Total: ",u.length]})]}),(0,b.jsxs)("div",{className:(0,o.cn)("rounded-2xl border p-4 backdrop-blur-sm flex flex-col sm:flex-row gap-3 items-center justify-between","dark"===a?"bg-gradient-to-br from-white/5 to-white/[0.02] border-white/10":"bg-gradient-to-br from-white to-[#FAF7F2]/80 border-purple-200/30 shadow-lg shadow-purple-100/30"),children:[(0,b.jsxs)("div",{className:"relative flex-1 w-full sm:w-auto",children:[(0,b.jsx)(d.Search,{className:(0,o.cn)("absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4","dark"===a?"text-gray-400":"text-gray-500")}),(0,b.jsx)("input",{type:"text",placeholder:"Buscar por nombre, teléfono o CUIL...",value:w,onChange:a=>x(a.target.value),className:(0,o.cn)("pl-10 pr-4 py-2 w-full rounded-lg border text-sm","dark"===a?"bg-white/5 border-white/10 text-white placeholder-gray-500":"bg-white border-gray-200 text-gray-700 placeholder-gray-400")})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)("button",{onClick:T,className:(0,o.cn)("flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors","dark"===a?"bg-green-500/20 text-green-400 hover:bg-green-500/30":"bg-green-100 text-green-600 hover:bg-green-200"),children:[(0,b.jsx)(e.Download,{className:"w-4 h-4"}),"Exportar Excel"]}),(0,b.jsxs)("button",{onClick:O,className:(0,o.cn)("flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors","dark"===a?"bg-blue-500/20 text-blue-400 hover:bg-blue-500/30":"bg-blue-100 text-blue-600 hover:bg-blue-200"),children:[(0,b.jsx)(f.RefreshCw,{className:(0,o.cn)("w-4 h-4",s&&"animate-spin")}),"Actualizar"]})]})]}),(0,b.jsx)("div",{className:(0,o.cn)("rounded-2xl border backdrop-blur-sm overflow-hidden","dark"===a?"bg-gradient-to-br from-white/5 to-white/[0.02] border-white/10":"bg-gradient-to-br from-white to-[#FAF7F2]/80 border-purple-200/30 shadow-lg shadow-purple-100/30"),children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:(0,o.cn)("border-b","dark"===a?"bg-white/5 border-white/10":"bg-purple-50/50 border-purple-100"),children:[(0,b.jsx)("th",{className:(0,o.cn)("px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider","dark"===a?"text-gray-300":"text-gray-700"),children:"Afiliado"}),(0,b.jsx)("th",{className:(0,o.cn)("px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider","dark"===a?"text-gray-300":"text-gray-700"),children:"Datos Contacto"}),(0,b.jsx)("th",{className:(0,o.cn)("px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider","dark"===a?"text-gray-300":"text-gray-700"),children:"Estado"}),(0,b.jsx)("th",{className:(0,o.cn)("px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider","dark"===a?"text-gray-300":"text-gray-700"),children:"Acciones"})]})}),(0,b.jsxs)("tbody",{className:(0,o.cn)("divide-y","dark"===a?"divide-white/10":"divide-gray-200"),children:[S.map(c=>(0,b.jsxs)("tr",{className:(0,o.cn)("transition-colors","dark"===a?"hover:bg-white/5":"hover:bg-purple-50/30"),children:[(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:(0,o.cn)("font-medium text-sm","dark"===a?"text-white":"text-gray-900"),children:c.affiliate?.nombre||"Sin Nombre"}),(0,b.jsxs)("span",{className:(0,o.cn)("text-xs","dark"===a?"text-gray-400":"text-gray-500"),children:["CUIL: ",c.affiliate?.cuil||"-"]}),(0,b.jsx)("span",{className:(0,o.cn)("text-xs","dark"===a?"text-gray-400":"text-gray-500"),children:c.affiliate?.localidad})]})}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(g.Phone,{className:"w-3 h-3 text-gray-400"}),(0,b.jsx)("span",{className:(0,o.cn)("text-sm","dark"===a?"text-gray-300":"text-gray-600"),children:c.affiliate?.telefono1})]}),(0,b.jsx)("div",{className:"flex items-center gap-2",children:(0,b.jsx)("span",{className:(0,o.cn)("text-xs px-2 py-0.5 rounded-full border","dark"===a?"border-gray-700 text-gray-400":"border-gray-200 text-gray-500"),children:c.affiliate?.obraSocial||"Sin OS"})})]})}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,b.jsxs)("select",{value:c.status,onChange:a=>P(c._id,a.target.value),className:(0,o.cn)("px-2 py-1 rounded-md text-xs font-medium border-none outline-none cursor-pointer",(b=>{switch(b){case"Pendiente":return"dark"===a?"bg-yellow-500/20 text-yellow-400":"bg-yellow-100 text-yellow-700";case"En Gestión":return"dark"===a?"bg-blue-500/20 text-blue-400":"bg-blue-100 text-blue-700";case"Contactado":return"dark"===a?"bg-purple-500/20 text-purple-400":"bg-purple-100 text-purple-700";case"Venta":return"dark"===a?"bg-green-500/20 text-green-400":"bg-green-100 text-green-700";case"No Interesa":return"dark"===a?"bg-red-500/20 text-red-400":"bg-red-100 text-red-700";default:return"dark"===a?"bg-gray-500/20 text-gray-400":"bg-gray-100 text-gray-700"}})(c.status)),children:[(0,b.jsx)("option",{value:"Pendiente",children:"Pendiente"}),(0,b.jsx)("option",{value:"En Gestión",children:"En Gestión"}),(0,b.jsx)("option",{value:"Contactado",children:"Contactado"}),(0,b.jsx)("option",{value:"Venta",children:"Venta"}),(0,b.jsx)("option",{value:"No Interesa",children:"No Interesa"}),(0,b.jsx)("option",{value:"No Contesta",children:"No Contesta"})]}),c.subStatus&&(0,b.jsx)("span",{className:(0,o.cn)("text-[10px] italic","dark"===a?"text-gray-400":"text-gray-500"),children:c.subStatus})]})}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("button",{onClick:()=>{B(c),D(`Hola ${c.affiliate.nombre}, soy de Dann Salud. Te contacto por tu consulta sobre obra social.`),z(!0)},className:(0,o.cn)("p-2 rounded-lg transition-colors","dark"===a?"bg-green-500/20 text-green-400 hover:bg-green-500/30":"bg-green-100 text-green-600 hover:bg-green-200"),title:"Enviar WhatsApp",children:(0,b.jsx)(h.MessageCircle,{className:"w-4 h-4"})}),(0,b.jsx)("button",{onClick:()=>{let a;return B(c),void((a=new Date).setDate(a.getDate()+1),a.setHours(10,0,0,0),J(a.toISOString().slice(0,16)),L(""),H(!0))},className:(0,o.cn)("p-2 rounded-lg transition-colors","dark"===a?"bg-blue-500/20 text-blue-400 hover:bg-blue-500/30":"bg-blue-100 text-blue-600 hover:bg-blue-200"),title:"Reprogramar",children:(0,b.jsx)(i.Clock,{className:"w-4 h-4"})})]})})]},c._id)),0===S.length&&!s&&(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:4,className:"px-6 py-8 text-center text-gray-500",children:"No tienes datos asignados para hoy."})})]})]})})}),y&&A&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:(0,b.jsxs)("div",{className:(0,o.cn)("w-full max-w-md rounded-2xl border p-6 shadow-xl animate-scale-in","dark"===a?"bg-[#1a1b26] border-white/10":"bg-white border-gray-200"),children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsxs)("h3",{className:(0,o.cn)("text-lg font-semibold flex items-center gap-2","dark"===a?"text-white":"text-gray-800"),children:[(0,b.jsx)(h.MessageCircle,{className:"w-5 h-5 text-green-500"}),"Enviar WhatsApp"]}),(0,b.jsx)("button",{onClick:()=>z(!1),className:"text-gray-500 hover:text-gray-700",children:(0,b.jsx)(l.X,{className:"w-5 h-5"})})]}),(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsxs)("p",{className:(0,o.cn)("text-sm mb-2","dark"===a?"text-gray-400":"text-gray-600"),children:["Para: ",(0,b.jsx)("span",{className:"font-medium text-green-500",children:A.affiliate.nombre})," (",A.affiliate.telefono1,")"]}),(0,b.jsx)("textarea",{value:C,onChange:a=>D(a.target.value),rows:4,className:(0,o.cn)("w-full p-3 rounded-xl border text-sm resize-none focus:ring-2 focus:ring-green-500/50 outline-none","dark"===a?"bg-white/5 border-white/10 text-white":"bg-gray-50 border-gray-200 text-gray-800"),placeholder:"Escribe tu mensaje aquí..."})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,b.jsx)("button",{onClick:()=>z(!1),className:(0,o.cn)("px-4 py-2 rounded-lg text-sm font-medium transition-colors","dark"===a?"hover:bg-white/10 text-gray-300":"hover:bg-gray-100 text-gray-600"),children:"Cancelar"}),(0,b.jsx)("button",{onClick:Q,disabled:E||!C.trim(),className:(0,o.cn)("flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors","bg-green-500 text-white hover:bg-green-600 disabled:opacity-50 disabled:cursor-not-allowed"),children:E?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Enviando..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(k.Send,{className:"w-4 h-4"}),"Enviar Mensaje"]})})]})]})}),G&&A&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:(0,b.jsxs)("div",{className:(0,o.cn)("w-full max-w-md rounded-2xl border p-6 shadow-xl animate-scale-in","dark"===a?"bg-[#1a1b26] border-white/10":"bg-white border-gray-200"),children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsxs)("h3",{className:(0,o.cn)("text-lg font-semibold flex items-center gap-2","dark"===a?"text-white":"text-gray-800"),children:[(0,b.jsx)(m.Calendar,{className:"w-5 h-5 text-blue-500"}),"Reprogramar Llamada"]}),(0,b.jsx)("button",{onClick:()=>H(!1),className:"text-gray-500 hover:text-gray-700",children:(0,b.jsx)(l.X,{className:"w-5 h-5"})})]}),(0,b.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:(0,o.cn)("text-xs mb-1 block","dark"===a?"text-gray-400":"text-gray-500"),children:"Fecha y Hora"}),(0,b.jsx)("input",{type:"datetime-local",value:I,onChange:a=>J(a.target.value),className:(0,o.cn)("w-full p-3 rounded-xl border text-sm focus:ring-2 focus:ring-blue-500/50 outline-none","dark"===a?"bg-white/5 border-white/10 text-white":"bg-gray-50 border-gray-200 text-gray-800")})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:(0,o.cn)("text-xs mb-1 block","dark"===a?"text-gray-400":"text-gray-500"),children:"Nota (Opcional)"}),(0,b.jsx)("textarea",{value:K,onChange:a=>L(a.target.value),rows:3,className:(0,o.cn)("w-full p-3 rounded-xl border text-sm resize-none focus:ring-2 focus:ring-blue-500/50 outline-none","dark"===a?"bg-white/5 border-white/10 text-white":"bg-gray-50 border-gray-200 text-gray-800"),placeholder:"Motivo de reprogramación..."})]})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,b.jsx)("button",{onClick:()=>H(!1),className:(0,o.cn)("px-4 py-2 rounded-lg text-sm font-medium transition-colors","dark"===a?"hover:bg-white/10 text-gray-300":"hover:bg-gray-100 text-gray-600"),children:"Cancelar"}),(0,b.jsx)("button",{onClick:R,disabled:M||!I,className:(0,o.cn)("flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors","bg-blue-500 text-white hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed"),children:M?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Guardando..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(j.CheckCircle,{className:"w-4 h-4"}),"Confirmar"]})})]})]})})]})}a.s(["ContactarDatosDia",()=>s])}];

//# sourceMappingURL=Documentos_Dann-Salud-Broadcaster_frontend-nextjs_8b55508f._.js.map